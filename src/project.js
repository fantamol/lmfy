require=function t(e,i,s){function n(o,l){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!l&&c)return c(o,!0);if(a)return a(o,!0);var r=new Error("Cannot find module '"+o+"'");throw r.code="MODULE_NOT_FOUND",r}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return n(i||t)},h,h.exports,t,e,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({BagItem:[function(t,e,i){"use strict";cc._RF.push(e,"bf0062X1sRNVLjPDsxbxm1T","BagItem"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,lb:cc.Label,item_link:null},onLoad:function(){this.node.on("mouseup",this.selectItem,this)},init:function(t,e){this.lb.string=t.bagshowname,this.lb.node.color=t.color,this.bag=e,this.item_link=t},selectItem:function(t){this.bag.selectItem(this)}}),cc._RF.pop()},{}],BagTab:[function(t,e,i){"use strict";cc._RF.push(e,"20157xc4h9HxKKStEmXrBVR","BagTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{bag_group:cc.Node,item_prefab:cc.Prefab,bag_full_rate:cc.Label,item_act:cc.Node,item_name:cc.Label,btn_change:cc.Node,item_detail:cc.Node,goods_detail:cc.Node,equiped_detail:cc.Node},onLoad:function(){this.item_detail.active=!0,this.equiped_detail.active=!0,this.goods_detail.active=!0,this.uiRefresh(),s.event_managers.battle_scene_manager.on("bag_refresh",this.uiRefresh,this),this.node.on("active-in-hierarchy-changed",this.onActiveChanged,this)},update:function(t){this.showItemAct(),this.showItemDetail(),this.checkDbEquip()},onActiveChanged:function(){this.node.active||this.selected&&(this.selected.bg.active=!1,this.selected=null,this.update())},uiRefresh:function(){this.selected=null,this.bag_group.removeAllChildren();var t=s.p.bag,e=!0,i=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value,c=cc.instantiate(this.item_prefab);this.bag_group.addChild(c),c.getComponent("BagItem").init(l,this)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.bag_group.height=30*t.length+5,this.bag_full_rate.string=t.length+" / "+s.p.bag_limit},selectItem:function(t){this.selected!=t?(null!=this.selected&&(this.selected.bg.active=!1),t.bg.active=!0,this.selected=t):(this.selected.bg.active=!1,this.selected=null)},showItemAct:function(){null!=this.selected?(this.item_act.active=!0,this.item_name.string=this.selected.item_link.bagshowname,this.item_name.node.color=this.selected.item_link.color):this.item_act.active=!1},showItemDetail:function(){if(null==this.selected)this.item_detail.x=2e3,this.goods_detail.x=2e3;else{var t=this.selected.item_link,e=this.selected.node,i=(this.selected.item_link,null),s=null;"equip"==t.top_type?(this.goods_detail.x=2e3,s=(i=this.item_detail).getComponent("ItemDetail")):(this.item_detail.x=2e3,s=(i=this.goods_detail).getComponent("GoodsDetail"));var n=cc.Canvas.instance.node.convertToNodeSpaceAR(e.convertToWorldSpace(cc.v2(0,0))).y;n>240||n<-120?i.x=2e3:(i.x=33,i.y=n+e.height,i.convertToWorldSpace(cc.v2(0,0)).y<0&&(i.y=i.height-320)),s.item!=t&&s.refresh(t)}},checkDbEquip:function(){var t=this.equiped_detail;if(33==this.item_detail.x){var e=t.getComponent("ItemDetail"),i=s.p.equips[this.selected.item_link.mid_type];null!=i?(e.item!=i&&e.refresh(i),t.x=-170,t.y=Math.max(this.item_detail.y,t.height-320)):t.x=2e3}else t.x=2e3}}),cc._RF.pop()},{Common:"Common"}],BaoshuData:[function(t,e,i){"use strict";cc._RF.push(e,"6dd4eaP3Y5BU7A1Djopqj07","BaoshuData"),e.exports={jichu:{name:"基础宝术",note:"菜鸟行走江湖必备生存技能",contain:["yiji"]},sanjiaomao:{name:"三脚猫宝术",note:"暂无",contain:["maonao","baofu"]},jiaolu:{name:"角鹿宝术",note:"暂无",contain:["dinfei","fklt"]}},cc._RF.pop()},{}],BaoshuItem:[function(t,e,i){"use strict";cc._RF.push(e,"f09fc+ATjlLbpDFzT/L0d7o","BaoshuItem");var s=t("BaoshuData");cc.Class({extends:cc.Component,properties:{bg:cc.Node,lb:cc.Label,baoshu_link:null},onLoad:function(){this.node.on("mouseup",this.selectItem,this)},init:function(t,e){this.lb.string=s[t[0]].name+" lv."+t[1],this.tab=e,this.baoshu_link=t},selectItem:function(t){this.tab.selectBaoshu(this)}}),cc._RF.pop()},{BaoshuData:"BaoshuData"}],BattleBarTab:[function(t,e,i){"use strict";cc._RF.push(e,"8cdd1XrNMpCp7FMqbDeqKDO","BattleBarTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{lin_bar:cc.Node,battle_bar:cc.Node,bar_items:cc.Prefab,action_bar:cc.Node},onLoad:function(){s.event_managers.battle_scene_manager.on("refresh_battle_bar",this.refreshBattleBar,this),s.event_managers.battle_scene_manager.on("refresh_battle_bar_progress",this.refreshBattleBarProgress,this)},update:function(t){for(var e in this.lin_bar.children)e<s.p_lin?this.lin_bar.children[e].active=!0:this.lin_bar.children[e].active=!1;for(var e in this.action_bar.children)e<s.battle_manager.action_num?this.action_bar.children[e].active=!0:this.action_bar.children[e].active=!1},refreshBattleBar:function(){this.battle_bar.removeAllChildren();for(var t in s.battle_manager.all){var e=cc.instantiate(this.bar_items),i=s.battle_manager.all[t];this.battle_bar.addChild(e),e.color=i.report_color,e.x=220*i.progress,e.actor=i;var n=e.children[0];n.getComponent(cc.Label).string=i.shortname,"enemy"==i.top_type?n.y=-20:n.y=20}},refreshBattleBarProgress:function(){for(var t in this.battle_bar.children){var e=this.battle_bar.children[t];if(e.actor.death)e.active=!1;else if(0!=e.actor.progress){var i=Math.round(220*e.actor.progress),s=Math.round(e.x);if(s<=i){n=cc.moveTo(.3,i,e.y);e.runAction(n)}else if(s>i){var n=cc.sequence(cc.place(0,e.y),cc.moveTo(.3,i,e.y));e.runAction(n)}}else e.x=0}}}),cc._RF.pop()},{Common:"Common"}],BattleManager:[function(t,e,i){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}cc._RF.push(e,"15a3bfmWnBNoorvsYhHGnJJ","BattleManager");var n=t("Common"),a=t("PetData"),o=t("Enemy"),l=(t("Skill"),t("SkillData")),c=t("Places"),r=t("Funcs");cc.Class({properties:{step:"prepareNew",progress_length:0},ctor:function(){this.p=n.p,this.friends=this.p.pet_team,this.team=[],this.enemys=[],this.all=[],this.att=null,this.is_p_att=!0,this.action_num=0},process:function(){"prepareNew"==this.step?(this.prepareNew(),this.meetEnemys()):"fight"==this.step&&this.fight()},prepareNew:function(){n.p_lin=3,n.m_lin=3,this.action_num=0,this.team=[],this.all=[],this.p.c_qixue=this.p.t_qixue,this.p.death=!1,this.p.progress=0;for(var t in this.p.skills)this.p.skills[t][2]=0;var e=!0,i=!1,s=void 0;try{for(var a,o=this.friends[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l.c_qixue=l.t_qixue,l.death=!1,l.progress=0,this.team.push(l),this.all.push(l);for(var c in l.skills)l.skills[c][2]=0}}catch(t){i=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw s}}this.team.push(this.p),this.all.push(this.p)},meetEnemys:function(){this.enemys=[];for(var t=r.ChoiceList(c.data[n.p.place].m_teams),e=0;e<t.length;e++){var i=t[e],l=new o;l.init(i[0],a.monsters[i[0]]),l.isboss=i[1],l.initEnemy.apply(l,s(i[2])),this.enemys.push(l),this.all.push(l)}n.event_managers.battle_scene_manager.emit("enemytab_refresh");n.reports.push("<color=#ff0000>危险！</c><color=#000000>遇见<color={enemycolor}> {enemy} </c>等{enemynum}名敌人。</c>".format({enemy:this.enemys[0].shortname,enemycolor:this.enemys[0].report_color.toCSS("#rrggbb"),enemynum:t.length})),this.all.sort(function(t,e){return e.sudu-t.sudu}),this.progress_length=this.all[0].sudu,n.event_managers.battle_scene_manager.emit("refresh_battle_bar"),this.step="fight"},fight:function(){this.checkSudu(),this.chooseAtt(),this.addLin(),this.checkBuffBefore();var t=this.chooseSkill();if(0!=t){var e=l[t[0]].cls;this.is_p_att?e.init(t[1],this.att,this.team,this.enemys):e.init(t[1],this.att,this.enemys,this.team);var i=e.process();this.reportResult(i)}else{n.reports.push("<color=#ff0000>{att}无可用技能!</c>".format({att:this.att.shortname}))}this.checkBuffAfter(),this.checkFinish()},checkSudu:function(){this.all.sort(function(t,e){return(1-t.progress)/t.sudu-(1-e.progress)/e.sudu});var t=this.all[0];if(1!=t.progress){for(var e=(1-t.progress)/t.sudu,i=0;i<this.all.length;i++)this.all[i].progress+=this.all[i].sudu*e;n.event_managers.battle_scene_manager.emit("refresh_battle_bar_progress")}else n.event_managers.battle_scene_manager.emit("refresh_battle_bar_progress")},chooseAtt:function(){this.att=this.all[0],this.att.progress=0,"enemy"==this.att.top_type?this.is_p_att=!1:this.is_p_att=!0},addLin:function(){this.is_p_att?(n.p_lin=Math.min(7,n.p_lin+1),this.action_num+=1,5==this.action_num&&(n.p_lin=Math.min(7,n.p_lin+4),this.action_num=0)):n.m_lin=Math.min(7,n.m_lin+1)},checkBuffBefore:function(){},chooseSkill:function(){if(0==this.att.skill_logic.length)return!1;var t=null;t=this.is_p_att?n.p_lin:n.m_lin;var e=!0,i=!1,s=void 0;try{for(var a,o=this.att.skills[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var c=a.value;c[2]>0&&(c[2]-=1)}}catch(t){i=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw s}}var r=!0,h=!1,u=void 0;try{for(var m,p=this.att.skill_logic[Symbol.iterator]();!(r=(m=p.next()).done);r=!0){var _=m.value;if(l[_].need_lin<=t){var f=!0,g=!1,d=void 0;try{for(var b,x=this.att.skills[Symbol.iterator]();!(f=(b=x.next()).done);f=!0){var y=b.value;if(y[0]==_&&"lock"!=y[1]&&0==y[2])return y[2]=l[_].cooling,y}}catch(t){g=!0,d=t}finally{try{!f&&x.return&&x.return()}finally{if(g)throw d}}}}}catch(t){h=!0,u=t}finally{try{!r&&p.return&&p.return()}finally{if(h)throw u}}return!1},reportResult:function(t){if(2==t.length){var e="<color={attcolor}>{att}</c><color=#000000> 发动<color=#00ff00> {skill}</c>，对<color={dfdcolor}> {dfd} </c>造成<color=#ff0000> {damage}点 </c>伤害</c>".format({attcolor:this.att.report_color.toCSS("#rrggbb"),att:this.att.shortname,skill:t[0],dfdcolor:t[1][0].report_color.toCSS("#rrggbb"),dfd:t[1][0].shortname,damage:t[1][1]});t[1][2]&&(e+="<color=#ff0000><b>【暴击】</b></c>"),n.reports.push(e)}else if(t.length>2){n.reports.push("<color={attcolor}>{att}</c><color=#000000> 发动<color=#00ff00> {skill}</c> =》</c>".format({attcolor:this.att.report_color.toCSS("#rrggbb"),att:this.att.shortname,skill:t[0]}));for(var i=1;i<t.length;i++){var s="<color=#000000>，对<color={dfdcolor}> {dfd} </c>造成<color=#ff0000> {damage}点 </c>伤害</c>".format({dfdcolor:t[i][0].report_color.toCSS("#rrggbb"),dfd:t[i][0].shortname,damage:t[i][1]});t[i][2]&&(s+="<color=#ff0000><b>【暴击】</b></c>"),n.reports.push(s)}}},checkBuffAfter:function(){},checkFinish:function(){var t=!1,e=[];for(var i in this.all)this.all[i].death&&e.push(this.all[i]);for(var s in e)this.all.splice(this.all.indexOf(e[s]),1),"enemy"==e[s].top_type?this.enemys.indexOf(e[s])>=0&&this.enemys.splice(this.enemys.indexOf(e[s]),1):this.team.indexOf(e[s])>=0&&this.team.splice(this.team.indexOf(e[s]),1);0==this.team.length?(t=!0,this.pLose()):0==this.enemys.length&&(t=!0,this.pWin()),t&&(this.step="prepareNew")},pWin:function(){for(var t in this.team)this.team[t].c_exp+=5;this.p.money+=5;n.reports.push("<color=#0000ff><b>战斗胜利!</b></c>"),n.reports.push("<color=#000000>获得 <color=#00ff00>5 经验</c>,<color=#0000ff>5 银两</c>。</c>"),n.drop_manager.process()},pLose:function(){n.reports.push("<color=#00ff00>战斗失败!</c>")}}),cc._RF.pop()},{Common:"Common",Enemy:"Enemy",Funcs:"Funcs",PetData:"PetData",Places:"Places",Skill:"Skill",SkillData:"SkillData"}],BattleScene:[function(t,e,i){"use strict";cc._RF.push(e,"2b1e2wraiNDcoNKl/5+jK9V","BattleScene");var s=t("Common"),n=t("Player"),a=t("BattleManager"),o=t("SummonManager"),l=t("DropManager");cc.Class({extends:cc.Component,properties:{battle_scene_manager:cc.Node,block_layer:cc.Node},onLoad:function(){s.p=new n,s.battle_manager=new a,s.summon_manager=new o,s.drop_manager=new l,s.event_managers.battle_scene_manager=this.battle_scene_manager,s.event_managers.battle_scene_manager.on("block_show",this.onBlockShow,this),s.event_managers.battle_scene_manager.on("block_hide",this.onBlockßHide,this)},start:function(){this.schedule(s.battle_manager.process.bind(s.battle_manager),1)},onBlockShow:function(){this.block_layer.active=!0},"onBlockßHide":function(){this.block_layer.active=!1}}),cc._RF.pop()},{BattleManager:"BattleManager",Common:"Common",DropManager:"DropManager",Player:"Player",SummonManager:"SummonManager"}],BlockLayer:[function(t,e,i){"use strict";cc._RF.push(e,"546d7rub/FIGoZHw21Z0jLh","BlockLayer");var s=t("Common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){s.event_managers.battle_scene_manager.on("block_show",this.onShow,this),s.event_managers.battle_scene_manager.on("block_hide",this.onHide,this)},onShow:function(){this.node.active=!0},onHide:function(){this.node.active=!1}}),cc._RF.pop()},{Common:"Common"}],Buffs:[function(t,e,i){"use strict";cc._RF.push(e,"6f8afsOD59H65BhIMSOmp/8","Buffs"),e.exports={},cc._RF.pop()},{}],Common:[function(t,e,i){"use strict";cc._RF.push(e,"3807eGgY4tCWaC34tDGbWf1","Common"),e.exports={version:"2.0.1",p:null,battle_manager:null,summon_manager:null,drop_manager:null,p_lin:0,m_lin:0,event_managers:{},msgs:[],reports:[],BLACK:cc.color(0,0,0),GRAY:cc.color(122,122,122),GREEN:cc.color(6,243,6),LIGHTGREEN:cc.color(76,238,76),ORANGE:cc.color(250,128,10),RED:cc.color(243,6,6),BLUE:cc.color(0,0,255),LIGHTBLUE:cc.color(0,191,255),PURPLE:cc.color(128,0,128),GOLD:cc.color(255,215,0)},cc._RF.pop()},{}],ControlTab:[function(t,e,i){"use strict";cc._RF.push(e,"38942WcH9JJ2blwt2JET/Gf","ControlTab"),cc.Class({extends:cc.Component,properties:{btnBag:cc.Node,btnEquip:cc.Node,btnPet:cc.Node,btnSkill:cc.Node,btnOther:cc.Node,tabBag:cc.Node,tabEquip:cc.Node,tabPet:cc.Node,tabSkill:cc.Node,tabOther:cc.Node},onLoad:function(){this.btnBag.on("click",function(t){this.allDisable(),this.tabBag.active=!0},this),this.btnEquip.on("click",function(t){this.allDisable(),this.tabEquip.active=!0},this),this.btnPet.on("click",function(t){this.allDisable(),this.tabPet.active=!0},this),this.btnSkill.on("click",function(t){this.allDisable(),this.tabSkill.active=!0},this),this.btnOther.on("click",function(t){this.allDisable(),this.tabOther.active=!0},this)},allDisable:function(){this.tabBag.active=!1,this.tabEquip.active=!1,this.tabPet.active=!1,this.tabSkill.active=!1,this.tabOther.active=!1}}),cc._RF.pop()},{}],CountTab:[function(t,e,i){"use strict";cc._RF.push(e,"d4999KVRYBGNKoyigaqy27V","CountTab"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],DropManager:[function(t,e,i){"use strict";cc._RF.push(e,"9e83do2XydG0JvgCZ+K0MBX","DropManager");var s=t("Common"),n=t("Funcs"),a=t("Places"),o=t("Equip"),l=t("EquipData"),c=t("Goods");t("GoodsData");cc.Class({ctor:function(){},process:function(){var t=this.level_1();this.level_2(t)},level_1:function(){var t=[["",40],["equip",40],["good",20]];return n.ChoiceAsymmetryList(t)},level_2:function(t){"equip"==t?this.chooseEquip():"good"==t&&this.chooseGood()},chooseEquip:function(){var t=n.ChoiceList(l.equips_lv[a.data[s.p.place].level]),e=new o;e.init(t),e.get_pr(),e.get();s.reports.push("<color=#ff0000>恭喜！</c><color=#000000>你获得了<color={ecolor}> {ename} </c>。</c>".format({ecolor:e.color.toCSS("#rrggbb"),ename:e.bagshowname}))},chooseGood:function(){var t=new c.FenyaoYu;t.get();s.reports.push("<color=#ff0000>恭喜！</c><color=#000000>你获得了<color={ecolor}> {ename} x 1</c>。</c>".format({ecolor:t.color.toCSS("#rrggbb"),ename:t.showname}))}}),cc._RF.pop()},{Common:"Common",Equip:"Equip",EquipData:"EquipData",Funcs:"Funcs",Goods:"Goods",GoodsData:"GoodsData",Places:"Places"}],EnemyTab:[function(t,e,i){"use strict";cc._RF.push(e,"29558PGfLtIBoHzD0wdQ7DM","EnemyTab");var s=t("Common"),n=t("Places");cc.Class({extends:cc.Component,properties:{place_title:cc.Label,map:cc.Node,m_group:cc.Node,m_prefab:cc.Prefab,boss_prefab:cc.Prefab,btn_taotuo:cc.Button,btn_map:cc.Button},onLoad:function(){this.place_title.string=n.data[s.p.place].name,this.uiRefresh(),this.btn_taotuo.node.on("click",this.onTaotuo,this),this.btn_map.node.on("click",this.onMap,this),s.event_managers.battle_scene_manager.on("enemytab_refresh",this.uiRefresh,this)},onTaotuo:function(){s.battle_manager.step="prepareNew"},onMap:function(){this.map.active=!0,s.event_managers.battle_scene_manager.emit("block_show")},uiRefresh:function(){this.place_title.string=n.data[s.p.place].name,this.m_group.removeAllChildren();var t=s.battle_manager.enemys;for(var e in t){var i=null;(i=t[e].isboss?cc.instantiate(this.boss_prefab):cc.instantiate(this.m_prefab)).getComponent("MonsterBar").init(t[e],s.BLACK),this.m_group.addChild(i)}}}),cc._RF.pop()},{Common:"Common",Places:"Places"}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"6dd7a91eqNFVobbXZaADxjn","Enemy");var s=t("Common"),n=t("Pet");cc.Class({extends:n,ctor:function(){this.top_type="enemy",this.mid_type="enemy",this.report_color=s.LIGHTBLUE,this.isboss=!1},putinTeam:function(){},getoutTeam:function(){},levelUp:function(){},starUp:function(){},wakeUp:function(){},initEnemy:function(t,e,i){t<=100&&(this.level=t),e<=9&&(this.star_num=e),i<=2&&(this.wake_num=i),this.sxCalcu(),this.c_qixue=this.t_qixue}}),cc._RF.pop()},{Common:"Common",Pet:"Pet"}],Entity:[function(t,e,i){"use strict";cc._RF.push(e,"59e03rlrutKZri2coUu76wn","Entity"),cc.Class({ctor:function(){var t=new Date;this.obj_id=t.getTime()+parseInt(1e3*Math.random())}}),cc._RF.pop()},{}],EquipData:[function(t,e,i){"use strict";cc._RF.push(e,"b6729ykwYpDy7inmFD4E8eg","EquipData");for(var s=[["细木棒","weapon","武器",0],["开山斧","weapon","武器",10],["龙凤双剑","weapon","武器",20],["金背砍刀","weapon","武器",30],["火焰枪","weapon","武器",40],["黄金钺","weapon","武器",50],["游龙剑","weapon","武器",60],["水晶棒","weapon","武器",70],["黑炎魔刀","weapon","武器",80],["鱼肠剑","weapon","武器",90],["屠龙刀","weapon","武器",100],["湛卢剑","weapon","武器",110],["五擎天斧","weapon","武器",120],["灵犀神剑","weapon","武器",130],["祖龙枪","weapon","武器",140],["紫电青霜","weapon","武器",150],["弑皇","weapon","武器",160],["方巾","helm","头盔",0],["布帽","helm","头盔",10],["面具","helm","头盔",20],["纶巾","helm","头盔",30],["缨络丝带","helm","头盔",40],["羊角盔","helm","头盔",50],["水晶帽","helm","头盔",60],["乾坤帽","helm","头盔",70],["黑魔冠","helm","头盔",80],["白玉龙冠","helm","头盔",90],["水晶夔帽","helm","头盔",100],["翡翠曜冠","helm","头盔",110],["金丝黑玉冠","helm","头盔",120],["白玉琉璃冠","helm","头盔",130],["兽鬼珐琅面","helm","头盔",140],["紫金磐龙冠","helm","头盔",150],["浑天玄火盔","helm","头盔",160],["布衣","armor","铠甲",0],["皮衣","armor","铠甲",10],["鳞甲","armor","铠甲",20],["锁子甲","armor","铠甲",30],["紧身衣","armor","铠甲",40],["钢甲","armor","铠甲",50],["夜魔披风","armor","铠甲",60],["龙骨甲","armor","铠甲",70],["死亡斗篷","armor","铠甲",80],["神谕披风","armor","铠甲",90],["珊瑚玉衣","armor","铠甲",100],["金蚕披风","armor","铠甲",110],["乾坤护心甲","armor","铠甲",120],["蝉翼金丝甲","armor","铠甲",130],["金丝鱼鳞甲","armor","铠甲",140],["紫金磐龙甲","armor","铠甲",150],["混元一气甲","armor","铠甲",160],["布鞋","shoe","靴子",0],["牛皮靴","shoe","靴子",10],["马靴","shoe","靴子",20],["侠客履","shoe","靴子",30],["神行靴","shoe","靴子",40],["追星履","shoe","靴子",50],["踏月履","shoe","靴子",60],["九州履","shoe","靴子",70],["万里追云履","shoe","靴子",80],["踏雪无痕靴","shoe","靴子",90],["平步青云靴","shoe","靴子",100],["追云逐电靴","shoe","靴子",110],["乾坤天罡履","shoe","靴子",120],["七星逐月靴","shoe","靴子",130],["碧霞流云履","shoe","靴子",140],["金丝逐日履","shoe","靴子",150],["辟尘分光履","shoe","靴子",160],["布腰带","belt","腰带",0],["缎带","belt","腰带",10],["银腰带","belt","腰带",20],["水晶腰带","belt","腰带",30],["玉树腰带","belt","腰带",30],["琥珀腰链","belt","腰带",40],["白面狼牙带","belt","腰带",40],["虎龙腰带","belt","腰带",50],["鬼面魔童带","belt","腰带",50],["攫魂玉带","belt","腰带",60],["双魂引带","belt","腰带",60],["兽王腰带","belt","腰带",70],["百窜云环","belt","腰带",70],["八卦锻带","belt","腰带",80],["圣王玉带","belt","腰带",80],["幻彩玉带","belt","腰带",90],["珠翠玉环","belt","腰带",100],["金蟾含珠带","belt","腰带",110],["乾坤紫玉带","belt","腰带",120],["琉璃寒玉带","belt","腰带",130],["蝉翼鱼佩带","belt","腰带",140],["磐龙凤翔带","belt","腰带",150],["紫霄云芒带","belt","腰带",160],["护身符","jewelry","饰品",0],["五色飞石","jewelry","饰品",10],["珍珠链","jewelry","饰品",20],["骷髅吊坠","jewelry","饰品",30],["苍魂珠","jewelry","饰品",30],["江湖夜雨","jewelry","饰品",40],["九宫坠","jewelry","饰品",40],["荧光坠","jewelry","饰品",50],["皓月佩","jewelry","饰品",50],["风月宝链","jewelry","饰品",60],["八卦坠","jewelry","饰品",60],["碧水青龙佩","jewelry","饰品",70],["攫魂符","jewelry","饰品",70],["卷云坠","jewelry","饰品",80],["疾风之铃","jewelry","饰品",80],["七彩玲珑佩","jewelry","饰品",90],["黄玉琉佩","jewelry","饰品",100],["鸾飞凤舞坠","jewelry","饰品",110],["衔珠金凤佩","jewelry","饰品",120],["七璜珠玉佩","jewelry","饰品",130],["鎏金点翠佩","jewelry","饰品",140],["紫金碧玺佩","jewelry","饰品",150],["落霞陨星坠","jewelry","饰品",160]],n={},a=0;a<170;a+=10){n[a]=[];var o=!0,l=!1,c=void 0;try{for(var r,h=s[Symbol.iterator]();!(o=(r=h.next()).done);o=!0){var u=r.value;u[3]==a&&n[a].push(u)}}catch(t){l=!0,c=t}finally{try{!o&&h.return&&h.return()}finally{if(l)throw c}}}e.exports={fill_sx:{gongji:[10,20,10],fangyu:[5,15,10],qixue:[10,20,10],sudu:[2,1,1],minzhong:[5,5,10],dikang:[5,5,10],baoji:[1,.5,1],baoshang:[1,2,2]},equips:s,equips_lv:n},cc._RF.pop()},{}],EquipTab:[function(t,e,i){"use strict";cc._RF.push(e,"37adc8QG1tPz5Z4nkjgWxBc","EquipTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{item_detail:cc.Node,weapon:cc.Label,helm:cc.Label,armor:cc.Label,belt:cc.Label,shoe:cc.Label,jewelry:cc.Label,gongji:cc.Label,fangyu:cc.Label,sudu:cc.Label,qixue:cc.Label,baoji:cc.Label,baoshang:cc.Label,minzhong:cc.Label,dikang:cc.Label},onLoad:function(){for(var t in s.p.equips)this[t].node.on("mouseup",this.clickEquip,this);this.item_detail.active=!0,this.item_detail.x=2e3},update:function(t){var e=s.p.equips;for(var i in e)null!=e[i]?(this[i].string=e[i].bagshowname,this[i].node.color=e[i].color):this[i].string="";this.gongji.string="+ "+(s.p.add_sx.gongji+s.p.sf_sx.gongji),this.fangyu.string="+ "+(s.p.add_sx.fangyu+s.p.sf_sx.fangyu),this.sudu.string="+ "+(s.p.add_sx.sudu+s.p.sf_sx.sudu),this.qixue.string="+ "+(s.p.add_sx.qixue+s.p.sf_sx.qixue),this.baoji.string="+ "+(s.p.add_sx.baoji+s.p.sf_sx.baoji)+"%",this.baoshang.string="+ "+(s.p.add_sx.baoshang+s.p.sf_sx.baoshang)+"%",this.minzhong.string="+ "+(s.p.add_sx.minzhong+s.p.sf_sx.minzhong)+"%",this.dikang.string="+ "+(s.p.add_sx.dikang+s.p.sf_sx.dikang)+"%"},clickEquip:function(t){if(2e3==this.item_detail.x){var e=s.p.equips[t.target.name];if(null!=e){this.item_detail.x=33,this.item_detail.getComponent("ItemDetail").refresh(e);var i=cc.Canvas.instance.node;this.item_detail.y=i.convertToNodeSpaceAR(t.target.convertToWorldSpace(cc.v2(0,0))).y+20}}else this.item_detail.x=2e3},showItemDetail:function(){if(null==this.selected)this.item_detail.x=2e3;else{var t=this.selected.item_link;if("equip"==t.top_type){var e=this.selected.node,i=(this.selected.item_link,this.item_detail),s=i.getComponent("ItemDetail"),n=cc.Canvas.instance.node.convertToNodeSpaceAR(e.convertToWorldSpace(cc.v2(0,0))).y;s.item!=t&&s.refresh(t),n>240||n<-120?i.x=2e3:(i.x=33,i.y=n+e.height,i.convertToWorldSpace(cc.v2(0,0)).y<0&&(i.y=i.height-320))}else this.item_detail.x=2e3}}}),cc._RF.pop()},{Common:"Common"}],Equip:[function(t,e,i){"use strict";cc._RF.push(e,"f1bafbH8rRG3JRms+/BxsVx","Equip");var s=t("Common"),n=(t("PlayerData"),t("EquipData")),a=t("Suffixes"),o=t("Funcs"),l=t("Entity"),c=["","精致的","极品的","仙灵级","传说级","神话级"],r=[s.BLACK,s.LIGHTGREEN,s.BLUE,s.RED,s.PURPLE,s.GOLD];cc.Class({extends:l,name:"Equip",ctor:function(){this.shortname="",this.top_type="equip",this.mid_type="",this.btm_type="",this.level=0,this.price=10,this.jinlian=0,this.jinlian_types="",this.need_sl=0,this.equiped=!1,this.can_equip=!0,this.sx={},this.bonus_sx={},this.pr_index=0,this.profix="",this.suffix="",this.color=r[0],this.order_index=0},properties:{showname:{get:function(){return this.profix+this.shortname}},bagshowname:{get:function(){return this.suffix?this.profix+this.shortname+"【"+a.suffixes[this.suffix].title+"】":this.profix+this.shortname}},total_sx:{get:function(){var t={};for(var e in this.sx)e in t?t[e]+=this.sx[e]:t[e]=this.sx[e];for(var i in this.bonus_sx)i in t?t[i]+=this.bonus_sx[i]:t[i]=this.bonus_sx[i];return t}}},init:function(t){this.shortname=t[0],this.mid_type=t[1],this.btm_type=t[2],this.level=t[3],this.need_sl=Math.floor(this.level/10+1)},get_pr:function(){var t=Math.round(1e3*Math.random()),e=0;e=t<=1?5:t>=2&&t<=5?4:t>=6&&t<=20?3:t>=21&&t<=100?2:t>=101&&t<=400?1:0,this.price=this.price*(e+1)*3,this.pr_index=e,this.profix=c[e],this.color=r[e],this.set_sx(e);var i=!1;if(e>2)i=!0;else{var s=Math.floor(100*Math.random());2==e&&s<50?i=!0:1==e&&s<25&&(i=!0)}i&&(this.suffix=o.ChoiceObject(a.suffixes))},set_sx:function(t){this.need_sl=Math.max(Math.round((this.level/10+1)*(t+1)/2),1);var e=[];"weapon"==this.mid_type?e=["gongji","fangyu","baoji","baoshang","minzhong"]:"helm"==this.mid_type?e=["gongji","fangyu","qixue","dikang","minzhong"]:"armor"==this.mid_type?e=["fangyu","qixue","dikang","baoshang","minzhong"]:"belt"==this.mid_type?e=["gongji","fangyu","qixue","dikang","baoshang"]:"jewelry"==this.mid_type?e=["gongji","qixue","dikang","baoshang","minzhong"]:"shoe"==this.mid_type&&(e=["gongji","fangyu","qixue","sudu","baoshang"]),this.fill_sx(t,e)},fill_sx:function(t,e){var i=t+1,s=e.slice(0),a=Math.floor(Math.random()*s.length),o=s[a];s.splice(a,1);var l=n.fill_sx[o],c=Math.round(l[0]+l[1]*Math.floor(this.level/10));if(this.sx[o]=c,(i-=1)>0)for(var r=0;r<i;r++){var h=Math.floor(Math.random()*s.length),u=s[h];s.splice(h,1);var m=n.fill_sx[u],p=Math.round(m[0]+m[1]*Math.floor(this.level/10));this.bonus_sx[u]=p}},dress:function(){if(s.p.level<this.level)s.msgs.push("玩家等级未达到装备要求");else{this.equiped=!0;var t=s.p.bag,e=s.p.equips;null!=e[this.mid_type]&&e[this.mid_type].undress(null,!0),e[this.mid_type]=this;for(var i in this.total_sx)s.p.add_sx.hasOwnProperty(i)?s.p.add_sx[i]+=this.total_sx[i]:s.p.add_sx[i]=this.total_sx[i];t.splice(t.indexOf(this),1),s.p.collectSuffix(),this.refreshBagUI()}},undress:function(t,e){e=e||!1,this.equiped=!1,s.p.equips[this.mid_type]=null;for(var i in this.total_sx)s.p.add_sx[i]-=this.total_sx[i];s.p.bag.push(this),0==e&&(s.p.collectSuffix(),this.refreshBagUI())},get:function(){s.p.bag.length<s.p.bag_limit&&s.p.bag.push(this),this.refreshBagUI()},sold:function(){s.p.money+=this.price,this.lose()},lose:function(){s.p.bag.splice(s.p.bag.indexOf(this),1),this.refreshBagUI()},refreshBagUI:function(){s.event_managers.battle_scene_manager.emit("bag_refresh")},strong:function(){if(this.jinlian>=15)return!1;this.jinlian+=1;for(var t in this.sx)this.sx[t]+=n.fill_sx[t][2];if(Object.keys(this.bonus_sx).length>0){var e=o.ChoiceObject(this.bonus_sx);this.bonus_sx[e]+=n.fill_sx[e][2]}return!0}}),cc._RF.pop()},{Common:"Common",Entity:"Entity",EquipData:"EquipData",Funcs:"Funcs",PlayerData:"PlayerData",Suffixes:"Suffixes"}],Funcs:[function(t,e,i){"use strict";cc._RF.push(e,"562f358tIFONaPsRzuZ2RAF","Funcs"),e.exports={ChoiceObject:function(t){var e=Object.keys(t);return 1==e.length?e[0]:e[Math.floor(Math.random()*e.length)]},ChoiceList:function(t){return 1==t.length?t[0]:t[Math.floor(Math.random()*t.length)]},ChoiceAsymmetryList:function(t){if(1==t.length)return t[0][0];var e=0,i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done);i=!0)e+=a.value[1]}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}var l=Math.floor(Math.random()*e),c=!0,r=!1,h=void 0;try{for(var u,m=t[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var p=u.value;if(l<p[1])return p[0];l-=p[1]}}catch(t){r=!0,h=t}finally{try{!c&&m.return&&m.return()}finally{if(r)throw h}}return t[t.length-1][0]},SeedRandom:function(t){return(9301*t+49297)%233280/233280},SeedChoiceObject:function(t,e){var i=Object.keys(e);return i[Math.floor(this.SeedRandom(t)*i.length)]},SeedChoiceList:function(t,e){return e[Math.floor(this.SeedRandom(t)*e.length)]}},cc._RF.pop()},{}],GoodsData:[function(t,e,i){"use strict";cc._RF.push(e,"87dcazV7P1NjaOqsbK7VbE6","GoodsData"),e.exports={fenyaoyu:{name:"封妖玉",note:"<color=#000000>天灵宝玉，封印妖怪精魄于其内，通过<color=#0000ff><u>其他-祭坛</u></c>可以召唤妖怪为己所用。</c>"}},cc._RF.pop()},{}],GoodsDetail:[function(t,e,i){"use strict";cc._RF.push(e,"188c3ldhS5Il7n0kJXVmPqo","GoodsDetail");var s=t("GoodsData");cc.Class({extends:cc.Component,properties:{title:cc.Label,note:cc.RichText,money_node:cc.Node,money:cc.Label,btns:cc.Node,btn_pref:cc.Prefab},onLoad:function(){this.item=null},refresh:function(t){this.item=t;var e=0;this.title.string=t.showname,this.title.node.color=t.color,e=-40,this.note.string=s[t.btm_type].note,e-=this.note.node.height,e-=20,this.money.string=t.price,this.money_node.y=e,e-=20,this.btns.removeAllChildren();var i=cc.instantiate(this.btn_pref);this.btns.addChild(i),i.children[0].getComponent(cc.Label).string="出售",i.on("click",t.sold,t),e-=10,this.btns.y=e,e-=30,this.node.height=-e}}),cc._RF.pop()},{GoodsData:"GoodsData"}],Goods:[function(t,e,i){"use strict";cc._RF.push(e,"415daDQUHRHgZvIA8jEn1KB","Goods");var s=t("Common"),n=t("Entity"),a=t("GoodsData"),o=cc.Class({extends:n,ctor:function(){this.num=1,this.limit=30,this.top_type="goods",this.mid_type="",this.btm_type="",this.color=s.BLACK,this.price=10},properties:{showname:{get:function(){return a[this.btm_type].name}},bagshowname:{get:function(){return a[this.btm_type].name+"   x "+this.num}}},count_total_num:function(){var t=0,e=!0,i=!1,n=void 0;try{for(var a,o=s.p.bag[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l.mid_type==this.mid_type&&l.btm_type==this.btm_type&&(t+=l.num)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}return t},display_num:function(){return this.num},use:function(t){if(t<=this.count_total_num()){if(t<=this.num)this.lose(t);else{this.lose_all();var e=!0,i=!1,n=void 0;try{for(var a,o=s.p.bag[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l.mid_type==this.mid_type&&l.btm_type==this.btm_type&&l.use(t-this.num)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}}return!0}return!1},take_one:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=s.p.bag[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;if(o.mid_type==this.mid_type&&o.btm_type==this.btm_type)return o}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}return null},get:function(){var t=!0,e=!0,i=!1,n=void 0;try{for(var a,o=s.p.bag[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;if(l.mid_type==this.mid_type&&l.btm_type==this.btm_type&&l.num<l.limit){l.num+=1,t=!1;break}}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}t&&s.p.bag.length<s.p.bag_limit&&s.p.bag.push(this),this.refreshBagUI()},get_all:function(){s.p.bag.length<s.p.bag_limit&&(s.p.bag.push(this),this.num=this.limit,this.refreshBagUI())},lose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.num-=t,0==this.num&&(s.p.bag.splice(s.p.bag.indexOf(this),1),this.refreshBagUI())},lose_all:function(){s.p.bag.splice(s.p.bag.indexOf(this),1),this.refreshBagUI()},sold:function(){var t=this.price*this.num;s.p.money+=t,this.lose_all()},refreshBagUI:function(){s.event_managers.battle_scene_manager.emit("bag_refresh")}}),l=cc.Class({extends:o,ctor:function(){this.limit=1},properties:{bagshowname:{get:function(){return a[this.btm_type].name},override:!0}},display_num:function(){return null},get:function(){s.p.bag.length<s.p.bag_limit&&s.p.bag.push(this)},use:function(){this.lose()},lose:function(){s.p.bag.splice(s.p.bag.indexOf(this),1),this.refreshBagUI()},sold:function(){var t=this.price;s.p.money+=t,this.lose()}}),c=cc.Class({extends:l,ctor:function(){this.mid_type="fenyaoyu",this.btm_type="fenyaoyu",this.price=100,this.color=s.GOLD}});e.exports={FenyaoYu:c},cc._RF.pop()},{Common:"Common",Entity:"Entity",GoodsData:"GoodsData"}],ItemDetailSX:[function(t,e,i){"use strict";cc._RF.push(e,"20947/y3mpNaIctnVHuE/qp","ItemDetailSX");var s=t("Common");cc.Class({extends:cc.Component,properties:{title:cc.Label,data:cc.Label},onLoad:function(){},init:function(t,e,i,n){n=n||0,i=i||s.BLACK,this.title.string=t+"：",this.title.node.color=i,this.data.string=e,this.data.node.color=i,this.data.node.x+=n}}),cc._RF.pop()},{Common:"Common"}],ItemDetail:[function(t,e,i){"use strict";cc._RF.push(e,"c155bb1WRpD/ZAr0mMfe7f8","ItemDetail");var s=t("Names"),n=t("Common"),a=t("Suffixes");cc.Class({extends:cc.Component,properties:{suffix:cc.Label,base_detail:cc.Node,title:cc.Label,elevel:cc.Label,jlevel:cc.Label,etype:cc.Label,weapon_type:cc.Node,base_node:cc.Node,base_sx:cc.Node,bonus_node:cc.Node,bonus_sx:cc.Node,texin_node:cc.Node,texin:cc.Node,money_node:cc.Node,money:cc.Label,btns:cc.Node,sx_label:cc.Prefab,sx_label_overflow:cc.Prefab,btn_pref:cc.Prefab},onLoad:function(){this.item=null},refresh:function(t){var e=0;t.suffix?(e=-25,this.suffix.string=a.suffixes[t.suffix].title):(e=-15,this.suffix.string=""),this.base_detail.y=e,this.item=t,this.title.string=t.showname,this.title.node.color=t.color,this.elevel.string=t.level,this.jlevel.string=t.jinlian,this.etype.string=s.equip_mid_types[t.mid_type],this.weapon_type.removeAllChildren(),e-=85,this.base_sx.removeAllChildren();for(var i in t.sx){var o=cc.instantiate(this.sx_label);o.getComponent("ItemDetailSX").init(s.sx[i],"+ "+t.sx[i],n.BLUE),this.base_sx.addChild(o)}if(this.base_node.y=e,e-=22*this.base_sx.children.length+22,0!=Object.getOwnPropertyNames(t.bonus_sx).length){this.bonus_node.active=!0,this.bonus_sx.removeAllChildren();for(var l in t.bonus_sx){var c=cc.instantiate(this.sx_label);c.getComponent("ItemDetailSX").init(s.sx[l],"+ "+t.bonus_sx[l]),this.bonus_sx.addChild(c)}this.bonus_node.y=e,e-=22*this.bonus_sx.children.length+22}else this.bonus_node.active=!1;if(t.suffix){var r=a.suffixes[t.suffix];this.texin_node.active=!0,this.texin.removeAllChildren();var h=cc.instantiate(this.sx_label);h.getComponent("ItemDetailSX").init("两件",a.sx_txt[r.low.sx],n.BLACK),this.texin.addChild(h);var u=cc.instantiate(this.sx_label_overflow);u.getComponent("ItemDetailSX").init("四件",r.high.txt,n.BLACK),this.texin.addChild(u),this.texin_node.y=e,e-=44+u.children[0].height}else this.texin_node.active=!1;if(e-=20,this.money.string=t.price,this.money_node.y=e,e-=20,this.btns.removeAllChildren(),"item_detail"==this.node.name){if(t.equiped){var m=cc.instantiate(this.btn_pref);this.btns.addChild(m),m.children[0].getComponent(cc.Label).string="卸下",m.on("click",t.undress,t),m.on("click",function(t){this.node.active=!1},this)}else{var p=cc.instantiate(this.btn_pref);this.btns.addChild(p),p.children[0].getComponent(cc.Label).string="穿上",p.on("click",t.dress,t);var _=cc.instantiate(this.btn_pref);this.btns.addChild(_),_.children[0].getComponent(cc.Label).string="出售",_.on("click",t.sold,t)}e-=10,this.btns.y=e,e-=30}this.node.height=-e}}),cc._RF.pop()},{Common:"Common",Names:"Names",Suffixes:"Suffixes"}],MonsterBar:[function(t,e,i){"use strict";cc._RF.push(e,"e1eeddnxalAh4zIXI4Ml+GT","MonsterBar");var s=t("Common");cc.Class({extends:cc.Component,properties:{m_name:cc.Label,qixue_bar:cc.ProgressBar,monster:null},onLoad:function(){},init:function(t,e){e=e||s.BLACK,this.m_name.string=t.showname,this.m_name.node.color=e,this.monster=t},update:function(t){this.qixue_bar.progress=this.monster.c_qixue/this.monster.t_qixue}}),cc._RF.pop()},{Common:"Common"}],MsgController:[function(t,e,i){"use strict";cc._RF.push(e,"bf801GrRTJFO7d5fOwB8oe7","MsgController");var s=t("Common");cc.Class({extends:cc.Component,properties:{msg_pref:cc.Prefab,canvas:cc.Node},onLoad:function(){this.dur=0},update:function(t){this.dur+=t,s.msgs.length>0&&this.dur>.6&&(this.showMsg(s.msgs.shift()),this.dur=0)},showMsg:function(t){var e=cc.instantiate(this.msg_pref);e.getComponent("MsgItem").init(t),this.canvas.addChild(e),e.opacity=0;var i=cc.sequence(cc.place(0,0),cc.spawn(cc.moveBy(.5,0,200),cc.fadeIn(.5)),cc.delayTime(.5),cc.spawn(cc.moveBy(.2,0,100),cc.fadeOut(.2)),cc.callFunc(function(t){this.canvas.removeChild(t)},this));e.runAction(i)}}),cc._RF.pop()},{Common:"Common"}],MsgItem:[function(t,e,i){"use strict";cc._RF.push(e,"37e832InKRDBoddeA79kej7","MsgItem"),cc.Class({extends:cc.Component,properties:{title:cc.Label},onLoad:function(){},init:function(t){this.title.string=t.toString()}}),cc._RF.pop()},{}],Names:[function(t,e,i){"use strict";cc._RF.push(e,"13507lKAvFLjaKuNh3/XPYw","Names"),cc.Class({statics:{equip_mid_types:{weapon:"武器",helm:"头盔",armor:"铠甲",belt:"腰带",jewelry:"珠宝",shoe:"鞋子"},sx:{tizhi:"体质",moli:"魔力",fali:"法力",liliang:"力量",naili:"耐力",minjie:"敏捷",gongji:"攻击",qixue:"气血",fangyu:"防御",sudu:"速度",baoji:"暴击",baoshang:"暴伤",minzhong:"命中",dikang:"抵抗",lucky:"幸运"}}}),cc._RF.pop()},{}],OtherTab:[function(t,e,i){"use strict";cc._RF.push(e,"bdee6FKRHJINJZNEV1UrKSu","OtherTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{btn_summon:cc.Button,tab_summon:cc.Node},onLoad:function(){this.btn_summon.node.on("click",this.onSummon,this)},onSummon:function(){this.tab_summon.active=!0,s.event_managers.battle_scene_manager.emit("block_show"),this.tab_summon.getComponent("SummonTab").get_title.active=!1}}),cc._RF.pop()},{Common:"Common"}],PetBagGroup:[function(t,e,i){"use strict";cc._RF.push(e,"35cc3uU+wRLyJRdSIAG4MCY","PetBagGroup");var s=t("Common");cc.Class({extends:cc.Component,properties:{item_prefab:cc.Prefab,bag_full_rate:cc.Label,pet_detail:cc.Node},onLoad:function(){this.selected=null,this.uiRefresh(),s.event_managers.battle_scene_manager.on("petbag_refresh_ui",this.uiRefresh,this),s.event_managers.battle_scene_manager.on("petbag_refresh_status",this.statusRefresh,this)},uiRefresh:function(){var t=null;null!=this.selected&&(t=this.selected.pet_link),this.node.removeAllChildren();var e=s.p.pet_bag;for(var i in e){var n=cc.instantiate(this.item_prefab),a=e[i];this.node.addChild(n),n.getComponent("PetBagItem").init(a,this),t==a&&this.selectItem(n.getComponent("PetBagItem"))}this.node.height=30*e.length+5,this.bag_full_rate.string=e.length+" / "+s.p.pet_bag_limit,this.statusRefresh(),this.showPetDetail()},statusRefresh:function(){for(var t in this.node.children){var e=this.node.children[t].getComponent("PetBagItem");e.pet_link.inteam?e.status_node.active=!0:e.status_node.active=!1}},selectItem:function(t){this.selected!=t?(null!=this.selected&&(this.selected.bg.active=!1),t.bg.active=!0,this.selected=t):(this.selected.bg.active=!1,this.selected=null),this.showPetDetail()},showPetDetail:function(){null!=this.selected?(this.pet_detail.active=!0,this.pet_detail.getComponent("PetDetail").uiRefresh(this.selected.pet_link)):this.pet_detail.active=!1}}),cc._RF.pop()},{Common:"Common"}],PetBagItem:[function(t,e,i){"use strict";cc._RF.push(e,"f1d4069B8xBcqtbV3jBZElL","PetBagItem");var s=t("Common");cc.Class({extends:cc.Component,properties:{bg:cc.Node,lb:cc.Label,status_node:cc.Node,pet_link:null},onLoad:function(){this.node.on("mouseup",this.selectItem,this)},init:function(t,e){this.lb.string=t.showname,1==t.wake_num?this.lb.node.color=s.LIGHTGREEN:2==t.wake_num&&(this.lb.node.color=s.GOLD),this.bag=e,this.pet_link=t},selectItem:function(t){this.bag.selectItem(this)}}),cc._RF.pop()},{Common:"Common"}],PetBagTab:[function(t,e,i){"use strict";cc._RF.push(e,"00295X+XdRF7YqcQRfHVBJp","PetBagTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{bag_group:cc.Node,item_prefab:cc.Prefab,bag_full_rate:cc.Label,pet_detail:cc.Node},onLoad:function(){this.selected=null,this.uiRefresh(),s.event_managers.battle_scene_manager.on("petbag_refresh_ui",this.uiRefresh,this),s.event_managers.battle_scene_manager.on("petbag_refresh_status",this.statusRefresh,this)},uiRefresh:function(){var t=null;null!=this.selected&&(t=this.selected.pet_link),this.bag_group.removeAllChildren();var e=s.p.pet_bag;for(var i in e){var n=cc.instantiate(this.item_prefab),a=e[i];this.bag_group.addChild(n),n.getComponent("PetBagItem").init(a,this),t==a&&this.selectItem(n.getComponent("PetBagItem"))}this.bag_group.height=30*e.length+5,this.bag_full_rate.string=e.length+" / "+s.p.pet_bag_limit,this.statusRefresh(),this.showPetDetail()},statusRefresh:function(){for(var t in this.bag_group.children){var e=this.bag_group.children[t].getComponent("PetBagItem");e.pet_link.inteam?e.status_node.active=!0:e.status_node.active=!1}},selectItem:function(t){this.selected!=t?(null!=this.selected&&(this.selected.bg.active=!1),t.bg.active=!0,this.selected=t):(this.selected.bg.active=!1,this.selected=null),this.showPetDetail()},showPetDetail:function(){null!=this.selected?(this.pet_detail.active=!0,this.pet_detail.getComponent("PetDetail").uiRefresh(this.selected.pet_link)):this.pet_detail.active=!1}}),cc._RF.pop()},{Common:"Common"}],PetData:[function(t,e,i){"use strict";cc._RF.push(e,"97a3bTPNclHh4YJIHMNeFzK","PetData"),e.exports={sx_base:JSON.stringify({gongji:0,qixue:0,fangyu:0,sudu:0,baoji:10,baoshang:150,minzhong:0,dikang:0,exp:0}),monsters:{mao1:{name:"猫一",sx:{qixue:822,gongji:153,fangyu:62,sudu:112,baoji:8},sx_rare:{qixue:"C",gongji:"A",fangyu:"B",sudu:"A",baoji:"A"},skills:["maonao","baofu"],lock_skill:null,skill_logic:["baofu","maonao"]},gou1:{name:"狗一",sx:{qixue:960,gongji:124,fangyu:58,sudu:100,baoji:5},sx_rare:{qixue:"S",gongji:"D",fangyu:"C",sudu:"B",baoji:"B"},skills:["dinfei","fklt"],lock_skill:null,skill_logic:["fklt","dinfei"]},mao2:{name:"猫二",sx:{qixue:822,gongji:153,fangyu:62,sudu:112,baoji:8},sx_rare:{qixue:"C",gongji:"A",fangyu:"B",sudu:"A",baoji:"A"},skills:["maonao","baofu"],lock_skill:null,skill_logic:["baofu","maonao"]},gou2:{name:"狗二",sx:{qixue:960,gongji:124,fangyu:58,sudu:100,baoji:5},sx_rare:{qixue:"S",gongji:"D",fangyu:"C",sudu:"B",baoji:"B"},skills:["dinfei","fklt"],lock_skill:null,skill_logic:["fklt","dinfei"]},sanjiaomao:{name:"三脚猫",sx:{qixue:822,gongji:153,fangyu:62,sudu:112,baoji:8},sx_rare:{qixue:"D",gongji:"D",fangyu:"D",sudu:"B",baoji:"C"},ravity:"N",skills:["maonao","baofu"],lock_skill:null,skill_logic:["baofu","maonao"]},jiaolu:{name:"角鹿",sx:{qixue:960,gongji:124,fangyu:58,sudu:100,baoji:5},sx_rare:{qixue:"D",gongji:"D",fangyu:"C",sudu:"B",baoji:"D"},ravity:"N",skills:["dinfei","fklt"],lock_skill:null,skill_logic:["fklt","dinfei"]},tiebeilang:{name:"铁背狼",sx:{qixue:822,gongji:153,fangyu:62,sudu:112,baoji:8},sx_rare:{qixue:"B",gongji:"B",fangyu:"C",sudu:"B",baoji:"C"},ravity:"R",skills:["langzhua","benxi"],lock_skill:null,skill_logic:["benxi","langzhua"]},leibaohu:{name:"雷暴虎",sx:{qixue:822,gongji:153,fangyu:62,sudu:112,baoji:8},sx_rare:{qixue:"A",gongji:"C",fangyu:"C",sudu:"C",baoji:"B"},ravity:"R",skills:["huji","leitin","mhxs"],lock_skill:null,skill_logic:["mhxs","leitin","huji"]}},rares:{S:{sx_level:{qixue:105,gongji:35,fangyu:5},sx_star:{qixue:10,gongji:5,fangyu:2},sx_wake:{qixue:10,gongji:5,fangyu:2}},A:{sx_level:{qixue:90,gongji:30,fangyu:4},sx_star:{qixue:8,gongji:4,fangyu:1.5},sx_wake:{qixue:8,gongji:4,fangyu:1.5}},B:{sx_level:{qixue:75,gongji:25,fangyu:3},sx_star:{qixue:6,gongji:3,fangyu:1},sx_wake:{qixue:6,gongji:3,fangyu:1}},C:{sx_level:{qixue:60,gongji:20,fangyu:2},sx_star:{qixue:4,gongji:2,fangyu:.5},sx_wake:{qixue:4,gongji:2,fangyu:.5}},D:{sx_level:{qixue:50,gongji:15,fangyu:1},sx_star:{qixue:3,gongji:1,fangyu:.5},sx_wake:{qixue:3,gongji:1,fangyu:.5}}}},cc._RF.pop()},{}],PetDetail:[function(t,e,i){"use strict";cc._RF.push(e,"62661pcmBVO34W0DDadbzdk","PetDetail");var s=t("Common"),n=t("PetData");cc.Class({extends:cc.Component,properties:{pet_name:cc.Label,level:cc.Label,exp:cc.Label,exp_bar:cc.ProgressBar,gongji:cc.Label,qixue:cc.Label,fangyu:cc.Label,sudu:cc.Label,baoji:cc.Label,baoshang:cc.Label,minzhong:cc.Label,dikang:cc.Label,gongji_rare:cc.Label,qixue_rare:cc.Label,fangyu_rare:cc.Label,sudu_rare:cc.Label,skill_group:cc.Node,skill_prefab:cc.Prefab,btn_showdetail:cc.Button,btn_team:cc.Button,btn_team_lb:cc.Label,petbag_tab:cc.Node},onLoad:function(){this.btn_team.node.on("click",this.changeTeam,this)},uiRefresh:function(t){var e=n.monsters[t.pet_index].sx_rare;this.pet_name.string=t.petname,this.level.string=t.level+"/"+t.level_limit,this.exp.string=t.c_exp+"/"+t.t_exp,this.gongji.string=t.gongji,this.qixue.string=t.t_qixue,this.fangyu.string=t.fangyu,this.sudu.string=t.sudu,this.baoji.string=t.baoji+"%",this.baoshang.string=t.baoshang+"%",this.minzhong.string=t.minzhong+"%",this.dikang.string=t.dikang+"%",this.gongji_rare.string=e.gongji,this.qixue_rare.string=e.qixue,this.fangyu_rare.string=e.fangyu,this.sudu_rare.string=e.sudu,this.exp_bar.progress=t.c_exp/t.t_exp,t.inteam?this.btn_team_lb.string="休息":this.btn_team_lb.string="参战",this.skill_group.removeAllChildren();var i=!0,s=!1,a=void 0;try{for(var o,l=t.skills[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value,r=cc.instantiate(this.skill_prefab);this.skill_group.addChild(r),r.getComponent("PetSkill").init(c)}}catch(t){s=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw a}}},changeTeam:function(t){var e=this.petbag_tab.getComponent("PetBagTab").selected;if(null!=e){var i=e.pet_link;i.inteam?i.getoutTeam()&&(this.btn_team_lb.string="参战"):i.putinTeam()&&(this.btn_team_lb.string="休息"),s.event_managers.battle_scene_manager.emit("petbag_refresh_status"),s.event_managers.battle_scene_manager.emit("pettab_refresh")}}}),cc._RF.pop()},{Common:"Common",PetData:"PetData"}],PetSkill:[function(t,e,i){"use strict";cc._RF.push(e,"8aaa15UdU1IoYUpkY6jjYfw","PetSkill");var s=t("SkillData");cc.Class({extends:cc.Component,properties:{title:cc.Label,level:cc.Label},onLoad:function(){},init:function(t){this.title.string=s[t[0]].name,"lock"==t[1]?this.level.string="*封印*":this.level.string=t[1]+" 级"}}),cc._RF.pop()},{SkillData:"SkillData"}],PetTab:[function(t,e,i){"use strict";cc._RF.push(e,"bb67bIZRRFE/KdPkEyHeGYr","PetTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{pet_group:cc.Node,pet_prefab:cc.Prefab},onLoad:function(){this.uiRefresh(),s.event_managers.battle_scene_manager.on("pettab_refresh",this.uiRefresh,this)},uiRefresh:function(){var t=s.p.pet_team;this.pet_group.removeAllChildren();for(var e in t){var i=cc.instantiate(this.pet_prefab);1==t[e].wake_num?i.getComponent("MonsterBar").init(t[e],s.LIGHTGREEN):2==t[e].wake_num?i.getComponent("MonsterBar").init(t[e],s.GOLD):i.getComponent("MonsterBar").init(t[e],s.BLACK),this.pet_group.addChild(i)}}}),cc._RF.pop()},{Common:"Common"}],Pet:[function(t,e,i){"use strict";cc._RF.push(e,"f0830LaLuhK6KIYGCQpPtTz","Pet");var s=t("Common"),n=t("PetData"),a=t("SkillData"),o=t("Funcs");cc.Class({name:"Pet",ctor:function(){this.top_type="pet",this.mid_type="pet",this.report_color=s.BLUE,this.pet_index="",this.petname="测试宠物",this.zongzu="虫族",this.level=1,this.level_limit=20,this.star_num=1,this.wake_num=0,this.death=!1,this.c_xuemo={qixue:100,exp:0},this.init_sx=JSON.parse(n.sx_base),this.sx=JSON.parse(n.sx_base),this.add_sx=JSON.parse(n.sx_base),this.sx.exp=180,this.yaoyus={e1:null,e2:null,e3:null,e4:null,e5:null,e6:null},this.skills=[],this.lock_skill=null,this.skill_logic=[],this.inteam=!1,this.progress=0},init:function(t,e){this.pet_index=t;for(var i in this.add_sx)this.add_sx[i]=0;this.petname=e.name;for(var s in e.sx)this.sx[s]=e.sx[s],this.init_sx[s]=e.sx[s];for(var n in e.skills)n==e.lock_skill?this.skills.push([e.skills[n],"lock"]):this.skills.push([e.skills[n],1,0]);this.skill_logic=e.skill_logic,this.lock_skill=e.lock_skill,this.sxCalcu(),this.c_qixue=this.t_qixue},sxCalcu:function(){var t=n.monsters[this.pet_index],e=t.sx_rare,i=n.rares;this.sx.gongji=Math.round(t.sx.gongji+(i[e.gongji].sx_level.gongji+i[e.gongji].sx_star.gongji*this.star_num+i[e.gongji].sx_wake.gongji*this.wake_num)*this.level),this.sx.qixue=Math.round(t.sx.qixue+(i[e.qixue].sx_level.qixue+i[e.qixue].sx_star.qixue*this.star_num+i[e.qixue].sx_wake.qixue*this.wake_num)*this.level),this.sx.fangyu=Math.round(t.sx.fangyu+(i[e.fangyu].sx_level.fangyu+i[e.fangyu].sx_star.fangyu*this.star_num+i[e.fangyu].sx_wake.fangyu*this.wake_num)*this.level),this.c_xuemo.qixue>this.sx.qixue&&(this.c_xuemo.qixue=this.sx.qixue)},properties:{showname:{get:function(){return this.petname+" "+this.star_num+"星 lv."+this.level}},shortname:{get:function(){return this.petname}},gongji:{get:function(){return this.sx.gongji+this.add_sx.gongji}},fangyu:{get:function(){return this.sx.fangyu+this.add_sx.fangyu}},sudu:{get:function(){return this.sx.sudu+this.add_sx.sudu}},duobi:{get:function(){return this.sx.duobi+this.add_sx.duobi}},baoji:{get:function(){return this.sx.baoji+this.add_sx.baoji}},baoshang:{get:function(){return this.sx.baoshang+this.add_sx.baoshang}},dikang:{get:function(){return this.sx.dikang+this.add_sx.dikang}},minzhong:{get:function(){return this.sx.minzhong+this.add_sx.minzhong}},c_qixue:{get:function(){return this.c_xuemo.qixue},set:function(t){this.c_xuemo.qixue=t,this.c_xuemo.qixue<=0&&(this.c_xuemo.qixue=0,this.death=!0)}},c_exp:{get:function(){return this.c_xuemo.exp},set:function(t){this.level<this.level_limit&&(this.c_xuemo.exp=t),this.c_xuemo.exp>=this.t_exp&&(this.c_xuemo.exp-=this.t_exp,this.levelUp())}},t_qixue:{get:function(){return this.sx.qixue+this.add_sx.qixue}},t_exp:{get:function(){return this.sx.exp}},e1:{get:function(){return this.yaoyus.e1},set:function(t){this.yaoyus.e1=t}},e2:{get:function(){return this.yaoyus.e2},set:function(t){this.yaoyus.e2=t}},e3:{get:function(){return this.yaoyus.e3},set:function(t){this.yaoyus.e3=t}},e4:{get:function(){return this.yaoyus.e4},set:function(t){this.yaoyus.e4=t}},e5:{get:function(){return this.yaoyus.e5},set:function(t){this.yaoyus.e5=t}},e6:{get:function(){return this.yaoyus.e6},set:function(t){this.yaoyus.e6=t}}},get:function(){s.p.pet_bag.length<s.p.pet_bag_limit?(s.p.pet_bag.push(this),this.refreshBagUI()):s.msgs.push("拥有宠物数量达到上限！")},putinTeam:function(){return s.p.pet_team.length<4?(s.p.pet_team.push(this),this.inteam=!0,!0):(cc.log("pet bag full"),!1)},getoutTeam:function(){if(this.inteam){var t=s.p.pet_team;return t.splice(t.indexOf(this),1),this.inteam=!1,!0}},levelUp:function(){this.level>=100||this.level>=this.level_limit||(this.level+=1,this.sx.exp=2.5*Math.pow(this.level,3)+22.5*Math.pow(this.level,2)-10*this.level+150,this.sxCalcu(),this.refreshBagUI(),this.refreshPetTab())},starUp:function(){this.star_num>=9||(this.star_num+=1,this.level_limit=10+10*this.star_num,this.sxCalcu(),this.refreshBagUI())},wakeUp:function(){this.wake_num>=2||(this.wake_num+=1,this.sxCalcu(),this.refreshBagUI(),this.refreshPetTab())},skillLevelup:function(){var t=[],e=!0,i=!1,s=void 0;try{for(var n,l=this.skills[Symbol.iterator]();!(e=(n=l.next()).done);e=!0){var c=n.value;c[1]<a[c[0]].lvup.length&&t.push(c)}}catch(t){i=!0,s=t}finally{try{!e&&l.return&&l.return()}finally{if(i)throw s}}if(0==t.length)return!1;o.ChoiceList[t][1]+=1},refreshBagUI:function(){s.event_managers.battle_scene_manager.emit("petbag_refresh_ui")},refreshPetTab:function(){s.event_managers.battle_scene_manager.emit("pettab_refresh")}}),cc._RF.pop()},{Common:"Common",Funcs:"Funcs",PetData:"PetData",SkillData:"SkillData"}],PlaceItem:[function(t,e,i){"use strict";cc._RF.push(e,"15d15EqGUNGMrLh0SZM9E//","PlaceItem"),cc.Class({extends:cc.Component,properties:{bg:cc.Node,lb:cc.Label,place_num:null,data_link:null},onLoad:function(){this.node.on("mouseup",this.selectItem,this)},init:function(t,e,i){this.place_num=t,this.lb.string=e.name,this.group=i,this.data_link=e},selectItem:function(){this.group.selectItem(this)}}),cc._RF.pop()},{}],PlaceSelector:[function(t,e,i){"use strict";cc._RF.push(e,"235b8hhwNFE6plEah+TieLp","PlaceSelector");var s=t("Common"),n=t("Places"),a=t("PetData");cc.Class({extends:cc.Component,properties:{btn_close:cc.Button,places_list:cc.Node,place_item:cc.Prefab,place_title:cc.Label,place_description:cc.RichText,place_enemys:cc.Node,place_outputs:cc.Node,place_label:cc.Prefab,btn_richmap:cc.Button,btn_boss:cc.Button,btn_fight:cc.Button},onLoad:function(){this.selected=null,this.places_list.removeAllChildren();for(var t=0;t<n.data.length;t++){var e=cc.instantiate(this.place_item);e.getComponent("PlaceItem").init(t,n.data[t],this),this.places_list.addChild(e)}this.places_list.height=40*n.data.length,this.showPlaceDetail(),this.btn_close.node.on("click",this.onClose,this),this.btn_richmap.node.on("click",this.onRichMap,this),this.btn_boss.node.on("click",this.onBoss,this),this.btn_fight.node.on("click",this.onFight,this)},start:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.places_list.children[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value.getComponent("PlaceItem");o.place_num==s.p.place&&o.selectItem()}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}},onClose:function(){this.node.active=!1,s.event_managers.battle_scene_manager.emit("block_hide")},onRichMap:function(){},onBoss:function(){},onFight:function(){null!=this.selected&&(this.selected.place_num!=s.p.place&&(s.p.place=this.selected.place_num,s.battle_manager.step="prepareNew"),this.onClose())},selectItem:function(t){this.selected!=t?(null!=this.selected&&(this.selected.bg.active=!1),t.bg.active=!0,this.selected=t):(this.selected.bg.active=!1,this.selected=null),this.showPlaceDetail()},showPlaceDetail:function(){if(this.place_enemys.removeAllChildren(),this.place_outputs.removeAllChildren(),null!=this.selected){var t=this.selected.data_link;this.place_title.string=t.name;var e=!0,i=!1,s=void 0;try{for(var n,o=t.enemys[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var l=n.value,c=cc.instantiate(this.place_label);c.getComponent(cc.Label).string=a.monsters[l].name,this.place_enemys.addChild(c)}}catch(t){i=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw s}}}else this.place_title.string="请选择地点"}}),cc._RF.pop()},{Common:"Common",PetData:"PetData",Places:"Places"}],Places:[function(t,e,i){"use strict";cc._RF.push(e,"9c0e2EK/1NOEJP8r7NaVApp","Places"),e.exports={data:[{name:"南荒山",level:0,enemys:["leibaohu","tiebeilang","jiaolu","sanjiaomao"],m_teams:[[["jiaolu",!1,[1,1,0]],["jiaolu",!1,[1,1,0]],["jiaolu",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["tiebeilang",!0,[3,1,0]]],[["jiaolu",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["tiebeilang",!0,[3,1,0]]],[["jiaolu",!1,[1,1,0]],["jiaolu",!1,[1,1,0]],["jiaolu",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["leibaohu",!0,[3,1,0]]],[["jiaolu",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["sanjiaomao",!1,[1,1,0]],["leibaohu",!0,[3,1,0]]]],boss_team:[["leibaohu",!0,[4,1,0]],["tiebeilang",!0,[3,1,0]],["tiebeilang",!0,[3,1,0]]]},{name:"郊外",level:5,enemys:["jmm","tzsy","mao1","gou1"],m_teams:[[["jmm",!1,[5,1,0]],["mao1",!1,[5,1,0]],["gou1",!1,[5,1,0]],["tzsy",!1,[5,1,0]],["tzsy",!0,[10,1,0]]],[["tzsy",!1,[5,1,0]],["mao1",!1,[5,1,0]],["tzsy",!1,[5,1,0]],["jmm",!1,[5,1,0]],["gou1",!0,[10,1,0]]]]}]},cc._RF.pop()},{}],PlayerData:[function(t,e,i){"use strict";cc._RF.push(e,"b57dccMOWZB9bHDbl9m7Ic4","PlayerData"),e.exports={zongzu:{"仙族":JSON.stringify({tizhi:12,liliang:11,naili:12,minjie:10}),"魔族":JSON.stringify({tizhi:12,liliang:11,naili:8,minjie:8}),"人族":JSON.stringify({tizhi:10,liliang:10,naili:10,minjie:10})},sx_base:JSON.stringify({gongji:0,qixue:0,fangyu:0,sudu:0,baoji:0,baoshang:0,minzhong:0,dikang:0,exp:0,kucun:0,lucky:0})},cc._RF.pop()},{}],PlayerTab:[function(t,e,i){"use strict";cc._RF.push(e,"bf329PCfadLiLUV+8envqsD","PlayerTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{pname:cc.Label,zongzu:cc.Label,xinbie:cc.Label,level:cc.Label,shenwang:cc.Label,money:cc.Label,yaoqi:cc.Label,tizhi:cc.Label,liliang:cc.Label,naili:cc.Label,minjie:cc.Label,qianli:cc.Label,gongji:cc.Label,fangyu:cc.Label,sudu:cc.Label,baoji:cc.Label,baoshang:cc.Label,lucky:cc.Label,minzhong:cc.Label,dikang:cc.Label,qixue:cc.Label,exp:cc.Label,kucun:cc.Label,qixueBar:cc.ProgressBar,expBar:cc.ProgressBar,kucunBar:cc.ProgressBar},onLoad:function(){this.p=s.p,this.pname.string=this.p.pname,this.zongzu.string=this.p.zongzu,this.xinbie.string=this.p.xinbie},update:function(t){this.shenwang.string=this.p.shenwang,this.money.string=this.p.money,this.yaoqi.string=this.p.yaoqi,this.qianli.string=this.p.qianli,this.p.zhuanshen>0?this.level.string=this.p.zhuanshen+"转"+this.p.level:this.level.string=this.p.level,this.tizhi.string=this.p.tizhi,this.liliang.string=this.p.liliang,this.naili.string=this.p.naili,this.minjie.string=this.p.minjie,this.gongji.string=this.p.gongji,this.fangyu.string=this.p.fangyu,this.sudu.string=this.p.sudu,this.baoji.string=this.p.baoji+"%",this.baoshang.string=this.p.baoshang+"%",this.minzhong.string=this.p.minzhong+"%",this.dikang.string=this.p.dikang+"%",this.lucky.string=this.p.lucky,this.qixue.string=this.p.c_qixue+"/"+this.p.t_qixue,this.qixueBar.progress=this.p.c_qixue/this.p.t_qixue,this.exp.string=this.p.c_exp+"/"+this.p.t_exp,this.expBar.progress=this.p.c_exp/this.p.t_exp,this.kucun.string=this.p.c_kucun+"/"+this.p.t_kucun,this.kucunBar.progress=this.p.c_kucun/this.p.t_kucun}}),cc._RF.pop()},{Common:"Common"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"3314fg3aN9IN4z0ccHs27Ip","Player");var s=t("Common"),n=t("PlayerData"),a=t("EquipData"),o=t("Equip"),l=t("PetData"),c=t("Pet"),r=t("Suffixes"),h=t("Goods"),u=t("BaoshuData");cc.Class({name:"Player",ctor:function(){this.top_type="player",this.mid_type="player",this.report_color=s.BLACK,this.pname="测试人员",this.zongzu="魔族",this.xinbie="男",this.level=1,this.zhuanshen=0,this.shenwang=0,this.money=1e3,this.yaoqi=1e3,this.qianli=0,this.lin_point=0,this.c_xuemo={qixue:100,exp:0,kucun:0},this.nengli=JSON.parse(n.zongzu[this.zongzu]),this.init_sx=JSON.parse(n.sx_base),this.sx=JSON.parse(n.sx_base),this.add_sx=JSON.parse(n.sx_base),this.sf_sx=JSON.parse(n.sx_base),this.bt_sx=JSON.parse(n.sx_base),this.sx.exp=180,this.sx.kucun=10*this.sx.exp,this.equips={weapon:null,helm:null,armor:null,belt:null,jewelry:null,shoe:null},this.bag=[],this.bag_limit=50,this.pet_team=[],this.pet_bag=[],this.pet_bag_limit=6,this.baoshu=[["jichu",1],["sanjiaomao",1]],this.skills=[],this.skill_logic=[],this.suffixes=[],this.buffs=[],this.progress=0,this.place=0,this.sxCalcu();for(var t=0;t<40;t++){var e=new o,i=Math.floor(Math.random()*a.equips_lv[0].length),r=a.equips_lv[0][i];e.init(r),e.get_pr(),this.bag.push(e)}for(var u=0;u<10;u++){var m=new h.FenyaoYu;this.bag.push(m)}for(var p=0;p<2;p++){var _=new c;_.init("sanjiaomao",l.monsters.sanjiaomao),this.pet_bag.push(_)}},properties:{showname:{get:function(){return this.pname}},shortname:{get:function(){return this.pname}},tizhi:{get:function(){return this.nengli.tizhi}},liliang:{get:function(){return this.nengli.liliang}},naili:{get:function(){return this.nengli.naili}},minjie:{get:function(){return this.nengli.minjie}},gongji:{get:function(){return this.sx.gongji+this.add_sx.gongji+this.sf_sx.gongji+this.bt_sx.gongji}},fangyu:{get:function(){return this.sx.fangyu+this.add_sx.fangyu+this.sf_sx.fangyu+this.bt_sx.fangyu}},sudu:{get:function(){return this.sx.sudu+this.add_sx.sudu+this.sf_sx.sudu+this.bt_sx.sudu}},baoji:{get:function(){return this.sx.baoji+this.add_sx.baoji+this.sf_sx.baoji+this.bt_sx.baoji}},baoshang:{get:function(){return 150+this.sx.baoshang+this.add_sx.baoshang+this.sf_sx.baoshang+this.bt_sx.baoshang}},dikang:{get:function(){return this.sx.dikang+this.add_sx.dikang+this.sf_sx.dikang+this.bt_sx.dikang}},minzhong:{get:function(){return this.sx.minzhong+this.add_sx.minzhong+this.sf_sx.minzhong+this.bt_sx.minzhong}},lucky:{get:function(){return this.sx.lucky+this.add_sx.lucky+this.sf_sx.lucky+this.bt_sx.lucky}},c_qixue:{get:function(){return this.c_xuemo.qixue},set:function(t){this.c_xuemo.qixue=t,this.c_xuemo.qixue<=0&&(this.c_xuemo.qixue=0,this.death=!0)}},c_exp:{get:function(){return this.c_xuemo.exp},set:function(t){this.c_xuemo.exp=t,this.c_xuemo.exp>=this.t_exp&&(this.c_xuemo.exp-=this.t_exp,this.levelUp())}},c_kucun:{get:function(){return this.c_xuemo.kucun},set:function(t){this.c_xuemo.kucun=Math.max(0,this.c_xuemo.kucun+t),this.c_xuemo.kucun>=this.t_kucun&&(this.c_xuemo.kucun=this.t_kucun)}},t_qixue:{get:function(){return this.sx.qixue+this.add_sx.qixue+this.sf_sx.qixue+this.bt_sx.qixue}},t_exp:{get:function(){return this.sx.exp}},t_kucun:{get:function(){return this.sx.kucun+this.add_sx.kucun}},weapon:{get:function(){return this.equips.weapon},set:function(t){this.equips.weapon=t}},helm:{get:function(){return this.equips.helm},set:function(t){this.equips.helm=t}},armor:{get:function(){return this.equips.armor},set:function(t){this.equips.armor=t}},belt:{get:function(){return this.equips.belt},set:function(t){this.equips.belt=t}},shoe:{get:function(){return this.equips.shoe},set:function(t){this.equips.shoe=t}},jewelry:{get:function(){return this.equips.jewelry},set:function(t){this.equips.jewelry=t}}},levelUp:function(){this.level>=100||(this.level+=1,this.sx.exp=2.5*Math.pow(this.level,3)+22.5*Math.pow(this.level,2)-10*this.level+150,this.sx.kucun=10*this.sx.exp,this.sxCalcu())},sxCalcu:function(){"仙族"==this.zongzu?this.sxCalcuXian():"魔族"==this.zongzu?this.sxCalcuMo():this.sxCalcuRen()},sxCalcuXian:function(){this.sx.qixue=Math.floor(4.5*this.tizhi+100),this.sx.gongji=Math.floor(this.minzhong/3+30),this.sx.fangyu=Math.floor(1.6*this.naili),this.sx.sudu=Math.floor(.1*this.tizhi+.1*this.naili+.1*this.liliang+.7*this.minjie),this.c_xuemo.qixue>this.sx.qixue&&(this.c_xuemo.qixue=this.sx.qixue)},sxCalcuMo:function(){this.sx.qixue=Math.floor(40*this.tizhi+350),this.sx.gongji=Math.floor(9*this.liliang+30),this.sx.fangyu=Math.floor(2*this.naili+10),this.sx.sudu=Math.floor(125+.3*this.minjie),this.c_xuemo.qixue>this.sx.qixue&&(this.c_xuemo.qixue=this.sx.qixue)},sxCalcuRen:function(){this.sx.qixue=Math.floor(5*this.tizhi+100),this.sx.gongji=Math.floor(this.minzhong/3+30),this.sx.fangyu=Math.floor(1.5*this.naili),this.sx.sudu=Math.floor(.1*this.tizhi+.1*this.naili+.1*this.liliang+.7*this.minjie),this.c_xuemo.qixue>this.sx.qixue&&(this.c_xuemo.qixue=this.sx.qixue)},collectSuffix:function(){this.suffixes=[];var t={};for(var e in this.equips)if(null!=e){var i=e.suffix;i&&(i in t?t[i]+=1:t[i]=1)}for(var s in t)t[s]>=2&&this.suffixes.push(s);this.calcuSuffixSX()},calcuSuffixSX:function(){if(this.sf_sx=JSON.parse(n.sx_base),this.suffixes.length>0){var t=!0,e=!1,i=void 0;try{for(var s,a=this.suffixes[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var o=s.value,l=r.suffixes[o].low.sx,c=15;"fangyu"==l&&(c=30),this.sf_sx[l]+=Math.round((this.sx[l]+this.add_sx[l])*c/100)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}}},baoshuLevelup:function(t){var e=!0,i=!1,n=void 0;try{for(var a,o=this.baoshu[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;if(l[0]==t)return l[1]<4?this.level>=20*l[1]?(l[1]+=1,s.msgs.push(u[t].name+"等级提升！"),s.event_managers.battle_scene_manager.emit("player_skill_refresh"),!0):(s.msgs.push("人物等级不足"+20*l[1]+"级"),!1):(s.msgs.push(u[t].name+"等级已达到上限"),!1)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}return!1}}),cc._RF.pop()},{BaoshuData:"BaoshuData",Common:"Common",Equip:"Equip",EquipData:"EquipData",Goods:"Goods",Pet:"Pet",PetData:"PetData",PlayerData:"PlayerData",Suffixes:"Suffixes"}],ProtoFuncs:[function(t,e,i){"use strict";cc._RF.push(e,"0c362AIQM9NH7Z4VXNFE5BS","ProtoFuncs");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};String.prototype.format=function(t){var e=this;if(arguments.length>0)if(1==arguments.length&&"object"==(void 0===t?"undefined":s(t))){for(var i in t)if(void 0!=t[i]){a=new RegExp("({"+i+"})","g");e=e.replace(a,t[i])}}else for(var n=0;n<arguments.length;n++)if(void 0!=arguments[n]){var a=new RegExp("({)"+n+"(})","g");e=e.replace(a,arguments[n])}return e},cc._RF.pop()},{}],ReportTab:[function(t,e,i){"use strict";cc._RF.push(e,"f9a44oOaptC6r93Pkmknw2U","ReportTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{line_group:cc.Node,line_prefab:cc.Prefab},onLoad:function(){},update:function(t){if(s.reports.length>0&&Math.round(this.line_group.y)==this.line_group.height-305){for(;s.reports.length>0;){var e=s.reports.shift(),i=cc.instantiate(this.line_prefab);i.getComponent(cc.RichText).string=e,this.line_group.addChild(i)}for(;this.line_group.childrenCount>200;)this.line_group.removeChild(this.line_group.children[0]);this.line_group.height=Math.max(305,25*this.line_group.childrenCount+5),this.line_group.height>305&&(this.line_group.y=this.line_group.height-305)}}}),cc._RF.pop()},{Common:"Common"}],SkillData:[function(t,e,i){"use strict";cc._RF.push(e,"cda08oSczlET6Apx82HHmwC","SkillData");var s=t("Skill"),n={yiji:{name:"一击",note:"全力攻击1名敌人，造成玩家攻击100%的伤害。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+10%"],need_lin:0,cooling:0,needwake:!1,cls:new s.NormalAttack},maonao:{name:"猫挠",note:"伸出利爪狠抓1名敌人，造成三脚猫攻击100%的伤害。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+10%"],need_lin:0,cooling:0,needwake:!1,cls:new s.NormalAttack},baofu:{name:"报复",note:"三脚猫张牙舞爪，仿佛有发泄不完的怨气，连续三次爪击一名敌人，每次造成攻击73%的伤害，冷却3回合。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%"],need_lin:2,cooling:3,needwake:!1,cls:new s.CLS_baofu},dinfei:{name:"顶飞",note:"角鹿跳到目标身边用角顶撞1名敌人，造成攻击100%的伤害。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+10%"],need_lin:0,cooling:0,needwake:!1,cls:new s.NormalAttack},fklt:{name:"疯狂连踢",note:"角鹿跳到敌人中间疯狂用脚踢敌人，对随机3名敌人造成攻击力109%的伤害，冷却3回合。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%"],need_lin:2,cooling:3,needwake:!1,cls:new s.CLS_fklt},langzhua:{name:"狼爪",note:"铁背狼扑向敌人，对1名敌人造成攻击力100%的伤害。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+10%"],need_lin:0,cooling:0,needwake:!1,cls:new s.NormalAttack},benxi:{name:"奔袭",note:"铁背狼飞快在敌人中间穿梭，对敌人随机攻击3次，每次造成攻击力110%的伤害，技能冷却2回合。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%"],need_lin:2,cooling:2,needwake:!1,cls:new s.CLS_benxi},huji:{name:"虎击",note:"雷暴虎扑向敌人，对1名敌人造成攻击力100%的伤害。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+10%"],need_lin:0,cooling:0,needwake:!1,cls:new s.NormalAttack},leitin:{name:"雷霆",note:"雷暴虎激发雷霆之力，雷电对前2名敌人造成攻击力100%的伤害，冷却1回合。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+10%"],need_lin:2,cooling:1,needwake:!1,cls:new s.CLS_leitin},mhxs:{name:"猛虎下山",note:"雷暴虎强势发动攻击，对敌方全体造成攻击力130%的伤害，冷却3回合。",lvup:["技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%","技能伤害额外+5%"],need_lin:3,cooling:3,needwake:!1,cls:new s.CLS_mhxs}};for(var a in n)n[a].cls.skill_data=n[a];e.exports=n,cc._RF.pop()},{Skill:"Skill"}],SkillItem:[function(t,e,i){"use strict";cc._RF.push(e,"1b8c56JNHZIoZGNDN/N5Eke","SkillItem");var s=t("SkillData");cc.Class({extends:cc.Component,properties:{bg:cc.Node,lb:cc.Label,skill_link:null},onLoad:function(){this.node.on("mouseup",this.selectItem,this)},init:function(t,e){this.lb.string=s[t].name,this.tab=e,this.skill_link=t},selectItem:function(t){this.tab.selectSkill(this)}}),cc._RF.pop()},{SkillData:"SkillData"}],SkillTab:[function(t,e,i){"use strict";cc._RF.push(e,"16b11ZOif9DiKeXsUQJ39EP","SkillTab");var s=function(){function t(t,e){var i=[],s=!0,n=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(s=(o=l.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){n=!0,a=t}finally{try{!s&&l.return&&l.return()}finally{if(n)throw a}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t("Common"),a=t("BaoshuData"),o=t("SkillData");cc.Class({extends:cc.Component,properties:{baoshu_group:cc.Node,skill_group:cc.Node,baoshu_item:cc.Prefab,skill_item:cc.Prefab,d_panel:cc.Node,d_type:cc.Label,d_name:cc.Label,d_level:cc.Label,d_note:cc.Label,btn_levelup:cc.Button,btn_act:cc.Button,btn_act_lb:cc.Label,player_skills:cc.Node,skill_prefab:cc.Prefab},onLoad:function(){this.uiRefresh(),this.btn_act.node.on("click",this.onSkillEquip,this),this.btn_levelup.node.on("click",this.onSkillLevelup,this),n.event_managers.battle_scene_manager.on("player_skill_refresh",this.uiRefresh,this)},uiRefresh:function(){this.baoshuGroupRefresh(),this.skillGroupRefresh(),this.playerSkillsRefresh(),this.d_panel.active=!1},baoshuGroupRefresh:function(){this.baoshu_select=null,this.baoshu_group.removeAllChildren();var t=!0,e=!1,i=void 0;try{for(var s,a=n.p.baoshu[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var o=s.value,l=cc.instantiate(this.baoshu_item);l.getComponent("BaoshuItem").init(o,this),this.baoshu_group.addChild(l)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}},skillGroupRefresh:function(){if(this.skill_select=null,this.skill_group.removeAllChildren(),null!=this.baoshu_select){var t=!0,e=!1,i=void 0;try{for(var s,n=a[this.baoshu_select.baoshu_link[0]].contain[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var o=s.value,l=cc.instantiate(this.skill_item);l.getComponent("SkillItem").init(o,this),this.skill_group.addChild(l)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}},detailRefresh:function(){if(null!=this.skill_select){this.d_panel.active=!0,this.d_type.string="技能:";var t=o[this.skill_select.skill_link];this.d_name.string=t.name,this.d_level.string=this.baoshu_select.baoshu_link[1];var e="",i=!0,l=!1,c=void 0;try{for(var r,h=t.lvup.entries()[Symbol.iterator]();!(i=(r=h.next()).done);i=!0){var u=r.value,m=s(u,2);e+="\n lv."+(m[0]+2)+"  "+m[1]}}catch(t){l=!0,c=t}finally{try{!i&&h.return&&h.return()}finally{if(l)throw c}}this.d_note.string=t.note+e,this.btn_levelup.node.active=!1,this.btn_act.node.active=!0,this.btn_act_lb.string="使用";var p=!0,_=!1,f=void 0;try{for(var g,d=n.p.skills[Symbol.iterator]();!(p=(g=d.next()).done);p=!0){var b=g.value;this.skill_select.skill_link==b[0]&&(this.btn_act_lb.string="取消")}}catch(t){_=!0,f=t}finally{try{!p&&d.return&&d.return()}finally{if(_)throw f}}}else if(null!=this.baoshu_select){this.d_panel.active=!0,this.d_type.string="宝术:";var x=a[this.baoshu_select.baoshu_link[0]];this.d_name.string=x.name,this.d_level.string=this.baoshu_select.baoshu_link[1],this.d_note.string=x.note,this.btn_act.node.active=!1,this.btn_levelup.node.active=!0}else this.d_panel.active=!1},playerSkillsRefresh:function(){this.player_skills.removeAllChildren();var t=!0,e=!1,i=void 0;try{for(var s,a=n.p.skills[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var o=s.value,l=cc.instantiate(this.skill_prefab);this.player_skills.addChild(l),l.getComponent("PetSkill").init(o)}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}},selectBaoshu:function(t){this.baoshu_select!=t?(null!=this.baoshu_select&&(this.baoshu_select.bg.active=!1),t.bg.active=!0,this.baoshu_select=t):(this.baoshu_select.bg.active=!1,this.baoshu_select=null),this.skillGroupRefresh(),this.detailRefresh()},selectSkill:function(t){this.skill_select!=t?(null!=this.skill_select&&(this.skill_select.bg.active=!1),t.bg.active=!0,this.skill_select=t):(this.skill_select.bg.active=!1,this.skill_select=null),this.detailRefresh()},onSkillEquip:function(){var t=null,e=!0,i=!1,a=void 0;try{for(var l,c=n.p.skills.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var r=l.value,h=s(r,2),u=h[0];if(h[1][0]==this.skill_select.skill_link){t=u,n.p.skill_logic.splice(u,1);break}}}catch(t){i=!0,a=t}finally{try{!e&&c.return&&c.return()}finally{if(i)throw a}}if(null!=t)n.p.skills.splice(t,1),this.btn_act_lb.string="使用";else{var m=Math.min(this.baoshu_select.baoshu_link[1],o[this.skill_select.skill_link].lvup.length);n.p.skills.push([this.skill_select.skill_link,m,0]),n.p.skill_logic.push(this.skill_select.skill_link),this.btn_act_lb.string="取消"}this.playerSkillsRefresh()},onSkillLevelup:function(){n.p.baoshuLevelup(this.baoshu_select.baoshu_link[0])}}),cc._RF.pop()},{BaoshuData:"BaoshuData",Common:"Common",SkillData:"SkillData"}],Skill:[function(t,e,i){"use strict";cc._RF.push(e,"e14be+fD1NOpKt4fAKOWSIh","Skill");var s=t("Common"),n=cc.Class({properties:{skill_data:null,level:1,select_num:1,cycle_num:1,dfds:[],results:[]},init:function(t,e,i,s){this.level=t,this.att=e,this.team=i,this.enemys=s,this.dfds=[],this.results=[]},process:function(){return this.useLin(),this.checkCycle(),this.returnResult()},useLin:function(){"enemy"==this.att.top_type?s.m_lin-=this.skill_data.need_lin:s.p_lin-=this.skill_data.need_lin},chooseDfds:function(){var t=this.enemys[0];return this.dfds.push(t),!0},calcuDamage:function(){for(var t in this.dfds){var e=this.dfds[t],i=(100+this.getLevelUpRate())/100,s=!1,n=0;100*Math.random()<=this.att.baoji?(n=Math.round(this.att.gongji*i*this.att.baoshang/100),s=!0):n=Math.round(this.att.gongji*i);var a=Math.round((.2*Math.random()+.9)*n*(1-e.fangyu/(300+e.fangyu)));e.c_qixue-=a,this.results.push([e,a,s])}},getLevelUpRate:function(){return 5==this.level?5*(this.level-1)+5:5*(this.level-1)},checkCycle:function(){this.results.push(this.skill_data.name);for(var t=0;t<this.cycle_num&&(this.dfds=[],this.chooseDfds());t++)this.calcuDamage()},returnResult:function(){return this.results}}),a=cc.Class({extends:n}),o=cc.Class({extends:n,chooseDfds:function(){return this.dfds=this.enemys,!0}}),l=cc.Class({extends:n,chooseDfds:function(){var t=this.enemys[0];return 1!=t.death&&(this.dfds.push(t),!0)}}),c=cc.Class({extends:n,chooseDfds:function(){var t=[],e=!0,i=!1,s=void 0;try{for(var n,a=this.enemys[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value;0==o.death&&t.push[o]}}catch(t){i=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}return 0!=t.length&&(1==t.length&&this.dfds.push(t[0]),this.dfds.push(Funcs.ChoiceList(t)),!0)}}),r=cc.Class({extends:n,chooseDfds:function(){var t=[],e=!0,i=!1,s=void 0;try{for(var n,a=this.enemys[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var o=n.value;t.push(o)}}catch(t){i=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw s}}if(this.enemys.length<=this.select_num)return this.dfds=t,!0;for(var l=0;l<this.select_num;l++){var c=Math.floor(Math.random()*t.length);this.dfds.push(t[c]),t.splice(c,1)}return!0}}),h=cc.Class({extends:n,chooseDfds:function(){if(this.enemys.length<=this.select_num){var t=!0,e=!1,i=void 0;try{for(var s,n=this.enemys[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var a=s.value;this.dfds.push(a)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}return!0}for(var o=0;o<this.select_num;o++)this.dfds.push(this.enemys[o]);return!0}}),u=cc.Class({extends:l,ctor:function(){this.cycle_num=3},getLevelUpRate:function(){return 5*(this.level-1)-27}}),m=cc.Class({extends:r,ctor:function(){this.select_num=3},getLevelUpRate:function(){return 9+5*(this.level-1)}}),p=cc.Class({extends:c,ctor:function(){this.cycle_num=3},getLevelUpRate:function(){return 10+5*(this.level-1)}}),_=cc.Class({extends:h,ctor:function(){this.select_num=2},getLevelUpRate:function(){return 5*(this.level-1)}}),f=cc.Class({extends:o,getLevelUpRate:function(){return 30+5*(this.level-1)}});e.exports={NormalAttack:a,CLS_baofu:u,CLS_fklt:m,CLS_benxi:p,CLS_leitin:_,CLS_mhxs:f},cc._RF.pop()},{Common:"Common"}],Suffixes:[function(t,e,i){"use strict";cc._RF.push(e,"ad2efmul4pBcL1gosLBu4s9","Suffixes"),e.exports={suffixes:{feiyi:{title:"肥遗",low:{sx:"dikang"},high:{txt:"造成伤害时有12%概率（+效果命中）禁锢敌人"}},bifang:{title:"毕方",low:{sx:"gongji"},high:{txt:"对血量超过70%的敌人造成额外40%的伤害"}},huashe:{title:"化蛇",low:{sx:"baoji"},high:{txt:"暴击伤害无视目标20%的防御"}},jiufen:{title:"九凤",low:{sx:"gongji"},high:{txt:"对血量低于30%的敌人造成额外50%的伤害"}},sang:{title:"殇",low:{sx:"minzhong"},high:{txt:"攻击处于禁锢、眩晕、昏睡状态的单位时 ，造成额外30%的伤害"}},kangdang:{title:"康当",low:{sx:"qixue"},high:{txt:"回合结束时，如果血量低于30%，回复15%的血量"}},qiongqi:{title:"穷奇",low:{sx:"qixue"},high:{txt:"受到的伤害降低30%"}},danghu:{title:"当扈",low:{sx:"fangyu"},high:{txt:"回合开始时 ，有50%概率获得2点灵能"}},xuangui:{title:"旋龟",low:{sx:"minzhong"},high:{txt:"战斗开始时为全体友方生成一个吸收自身血量10%伤害的护盾"}},baize:{title:"白泽",low:{sx:"minzhong"},high:{txt:"初次出场时获得额外3点灵能"}},lushu:{title:"鹿蜀",low:{sx:"qixue"},high:{txt:"所有的治疗效果增加20%"}},xiqu:{title:"犀渠",low:{sx:"qixue"},high:{txt:"造成伤害时有8%概率（+命中效果）眩晕敌人"}}},sx_txt:{gongji:"攻击加成 +15%",fangyu:"防御加成 +30%",qixue:"气血加成 +15%",baoji:"暴击 +15%",minzhong:"效果命中 +15%",dikang:"效果抵抗 +15%"}},cc._RF.pop()},{}],SummonManager:[function(t,e,i){"use strict";cc._RF.push(e,"aa17eEF8mREFK0ZzbYp3hV0","SummonManager");var s=t("Common"),n=t("Funcs"),a=t("Pet"),o=t("PetData");cc.Class({ctor:function(){this.summon_num=0,this.need_fenyaoyu=1,this.need_yaoqi=200,this.need_money=100},summon:function(){var t=this.lose_need();return this.get_pet(t)},lose_need:function(){s.p.money-=this.need_money,s.p.yaoqi-=this.need_yaoqi;var t=null,e=!0,i=!1,n=void 0;try{for(var a,o=s.p.bag[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;if("fenyaoyu"==l.btm_type){t=l;break}}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}return t.lose(),t},get_pet:function(t){var e=n.SeedChoiceObject(t.obj_id,o.monsters),i=new a;return i.init(e,o.monsters[e]),i.get(),i}}),cc._RF.pop()},{Common:"Common",Funcs:"Funcs",Pet:"Pet",PetData:"PetData"}],SummonTab:[function(t,e,i){"use strict";cc._RF.push(e,"fcaacpKdX9EjqHQTrBI7Ogs","SummonTab");var s=t("Common");cc.Class({extends:cc.Component,properties:{fenyaoyu:cc.Label,fenyaoyu_reach:cc.Node,yaoqi:cc.Label,yaoqi_reach:cc.Node,money:cc.Label,money_reach:cc.Node,btn_summon:cc.Button,get_title:cc.Node,pet_name:cc.Label,btn_close:cc.Button},onLoad:function(){this.uiRefresh(),this.btn_close.node.on("click",this.onClose,this),this.btn_summon.node.on("click",this.onSummon,this)},update:function(t){this.yaoqi.string=s.p.yaoqi+"/"+s.summon_manager.need_yaoqi,s.p.yaoqi>=s.summon_manager.need_yaoqi?this.yaoqi_reach.active=!0:this.yaoqi_reach.active=!1,this.money.string=s.p.money+"/"+s.summon_manager.need_money,s.p.money>=s.summon_manager.need_money?this.money_reach.active=!0:this.money_reach.active=!1,this.fenyaoyu_reach.active&&this.yaoqi_reach.active&&this.money_reach.active?this.btn_summon.enabled=!0:this.btn_summon.enabled=!1},uiRefresh:function(){var t=0,e=!0,i=!1,n=void 0;try{for(var a,o=s.p.bag[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;"fenyaoyu"==l.btm_type&&(t+=l.num)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.fenyaoyu.string=t+"/"+s.summon_manager.need_fenyaoyu,t>=s.summon_manager.need_fenyaoyu?this.fenyaoyu_reach.active=!0:this.fenyaoyu_reach.active=!1,this.yaoqi.string=s.p.yaoqi+"/"+s.summon_manager.need_yaoqi,s.p.yaoqi>=s.summon_manager.need_yaoqi?this.yaoqi_reach.active=!0:this.yaoqi_reach.active=!1,this.money.string=s.p.money+"/"+s.summon_manager.need_money,s.p.money>=s.summon_manager.need_money?this.money_reach.active=!0:this.money_reach.active=!1,this.fenyaoyu_reach.active&&this.yaoqi_reach.active&&this.money_reach.active?this.btn_summon.enabled=!0:this.btn_summon.enabled=!1},onClose:function(){this.node.active=!1,this.get_title.active=!1,s.event_managers.battle_scene_manager.emit("block_hide")},onSummon:function(){if(this.fenyaoyu_reach.active&&this.yaoqi_reach.active&&this.money_reach.active){var t=s.summon_manager.summon();this.get_title.active=!0,this.pet_name.string=t.showname,this.uiRefresh(),this.get_animation()}},get_animation:function(){var t=cc.sequence(cc.scaleTo(.1,.01),cc.scaleTo(1,1));this.pet_name.node.runAction(t)}}),cc._RF.pop()},{Common:"Common"}],TestBtns:[function(t,e,i){"use strict";cc._RF.push(e,"1a5c3ra7BpGnpPpCZ10N6Lh","TestBtns");var s=t("Common");cc.Class({extends:cc.Component,properties:{petbag_tab:cc.Node,bag_tab:cc.Node,equip_detail:cc.Node,btn1:cc.Button,btn2:cc.Button,btn3:cc.Button,btn4:cc.Button,btn5:cc.Button},onLoad:function(){this.btn1.node.on("click",this.petLevelUp,this),this.btn2.node.on("click",this.petStarUp,this),this.btn3.node.on("click",this.petWakeUp,this),this.btn4.node.on("click",this.equipStrong,this),this.btn5.node.on("click",this.msg,this)},petLevelUp:function(t){var e=this.petbag_tab.getComponent("PetBagTab");null!=e.selected&&e.selected.pet_link.levelUp()},petStarUp:function(t){var e=this.petbag_tab.getComponent("PetBagTab");null!=e.selected&&e.selected.pet_link.starUp()},petWakeUp:function(t){var e=this.petbag_tab.getComponent("PetBagTab");null!=e.selected&&e.selected.pet_link.wakeUp()},equipStrong:function(t){var e=this.bag_tab.getComponent("BagTab");null!=e.selected&&"equip"==(t=e.selected.item_link).top_type&&t.strong()&&this.equip_detail.getComponent("ItemDetail").refresh(t)},msg:function(t){s.msgs.push("这是一条消息")}}),cc._RF.pop()},{Common:"Common"}]},{},["BaoshuData","Buffs","Common","Enemy","Entity","Equip","EquipData","Goods","GoodsData","Names","Pet","PetData","Places","Player","PlayerData","Skill","SkillData","Suffixes","BattleManager","DropManager","SummonManager","Funcs","ProtoFuncs","BattleScene","BlockLayer","ControlTab","GoodsDetail","ItemDetail","ItemDetailSX","BagItem","BagTab","EquipTab","OtherTab","PetBagGroup","PetBagItem","PetBagTab","PetDetail","PetSkill","BaoshuItem","SkillItem","SkillTab","CountTab","TestBtns","BattleBarTab","EnemyTab","MonsterBar","PetTab","PlayerTab","ReportTab","PlaceItem","PlaceSelector","SummonTab","MsgController","MsgItem"]);